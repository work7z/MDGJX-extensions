(window.saladictEntry=window.saladictEntry||[]).push([[9,110,117,124],{1:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var a=n(76),s=n(38),i=n(10);const o=()=>{},r=new WeakMap,c=new WeakMap,l=new WeakMap,d={sync:{clear:f,remove:p,get:g,set:w,addListener:b,removeListener:m,createStream:y,get __storageArea__(){return"sync"}},local:{clear:f,remove:p,get:g,set:w,addListener:b,removeListener:m,createStream:y,get __storageArea__(){return"local"}},clear:f,addListener:b,removeListener:m,createStream:y,get __storageArea__(){return"all"}},u={send:C,addListener:_,removeListener:v,createStream:T,get __self__(){return!1},self:{initClient:z,initServer:function(){window.pageId="background page";const e=/^\[\[(.+)\]\]$/;browser.runtime.onMessage.addListener((t,n)=>{if(!t||!t.type)return;if("PAGE_INFO"===t.type)return Promise.resolve(function(e){const t={pageId:"",faviconURL:"",pageTitle:"",pageURL:""},n=e.tab;n?(t.pageId=n.id||"",n.favIconUrl&&(t.faviconURL=n.favIconUrl),n.url&&(t.pageURL=n.url),n.title&&(t.pageTitle=n.title)):(t.pageId="popup",e.url&&!e.url.startsWith("http")&&(t.faviconURL="https://saladict.crimx.com/favicon.ico"));return t}(n));const a=e.exec(t.type);if(a){t.type=a[1];const e=n.tab&&n.tab.id;return e?C(e,t):C(t)}})},send:async function(e){!1;void 0===window.pageId&&await z();return browser.runtime.sendMessage(Object.assign({},e,{__pageId__:window.pageId,type:`[[${e.type}]]`})).catch(e=>{!1})},addListener:_,removeListener:v,createStream:T,get __self__(){return!0}}};async function h(e,t){const n="string"==typeof e?{url:e,self:t}:e,a=!1!==n.unique,s=n.self?browser.runtime.getURL(n.url):n.url;if(a){const e=await browser.tabs.query({url:s}).catch(()=>[]);if(e.length>0){const{index:t,windowId:n}=e[0];return"function"==typeof browser.tabs.highlight&&await browser.tabs.highlight({tabs:t,windowId:n}),void await browser.windows.update(n,{focused:!0})}}await browser.tabs.create({url:s,active:!1!==n.active})}function f(){return"all"===this.__storageArea__?Promise.all([browser.storage.local.clear(),browser.storage.sync.clear()]).then(o):browser.storage[this.__storageArea__].clear()}function p(e){return browser.storage[this.__storageArea__].remove(e)}function g(...e){return browser.storage[this.__storageArea__].get(...e)}function w(e){return browser.storage[this.__storageArea__].set(e)}function b(...e){let t,n;if("function"==typeof e[0])t="",n=e[0];else{if("string"!=typeof e[0]||"function"!=typeof e[1])throw new Error("wrong arguments type");t=e[0],n=e[1]}let a=l.get(n);a||(a=new Map,l.set(n,a));const s=this.__storageArea__+t;let i=a.get(s);return i||(i=(e,a)=>{"all"!==this.__storageArea__&&a!==this.__storageArea__||t&&!(t in e)||n(e,a)},a.set(s,i)),browser.storage.onChanged.addListener(i)}function m(...e){let t,n;if("function"==typeof e[0])t="",n=e[0];else{if("string"!=typeof e[0]||"function"!=typeof e[1])throw new Error("wrong arguments type");t=e[0],n=e[1]}const a=l.get(n);if(a){if(!t)return a.forEach(e=>{browser.storage.onChanged.removeListener(e)}),void l.delete(n);{const e=this.__storageArea__+t,s=a.get(e);if(s)return browser.storage.onChanged.removeListener(s),a.delete(e),void(a.size<=0&&l.delete(n))}}browser.storage.onChanged.removeListener(n)}function y(e){if(!e)throw new Error("Missing key");return Object(a.a)(t=>this.addListener(e,t),t=>this.removeListener(e,t)).pipe(Object(s.a)(t=>Object.prototype.hasOwnProperty.call(Array.isArray(t)?t[0]:t,e)),Object(i.a)(t=>Array.isArray(t)?t[0][e]:t[e]))}function C(...e){return(1===e.length?browser.runtime.sendMessage(e[0]):browser.tabs.sendMessage(e[0],e[1])).catch(e=>{!1})}function _(...e){void 0===window.pageId&&z();const t=this.__self__?c:r,n=1===e.length?void 0:e[0],a=1===e.length?e[0]:e[1];let s=t.get(a);s||(s=new Map,t.set(a,s));let i=s.get(n||"__DEFAULT_MSGTYPE__");return i||(i=(e,t)=>{if(e&&(this.__self__?window.pageId===e.__pageId__:!e.__pageId__)&&(null==n||e.type===n))return a(e,t)},s.set(n||"__DEFAULT_MSGTYPE__",i)),browser.runtime.onMessage.addListener(i)}function v(...e){const t=this.__self__?c:r,n=1===e.length?void 0:e[0],a=1===e.length?e[0]:e[1],s=t.get(a);if(s){if(!n)return s.forEach(e=>browser.runtime.onMessage.removeListener(e)),void t.delete(a);{const e=s.get(n);if(e)return browser.runtime.onMessage.removeListener(e),s.delete(n),void(s.size<=0&&t.delete(a))}}browser.runtime.onMessage.removeListener(a)}function T(e){return(e?Object(a.a)(t=>this.addListener(e,t),t=>this.removeListener(e,t)):Object(a.a)(e=>this.addListener(e),e=>this.removeListener(e))).pipe(Object(i.a)(e=>Array.isArray(e)?e[0]:e))}function z(){return void 0===window.pageId?u.send({type:"PAGE_INFO"}).then(({pageId:e,faviconURL:t,pageTitle:n,pageURL:a})=>(window.pageId=e,window.faviconURL=t,n&&(window.pageTitle=n),a&&(window.pageURL=a),e)):Promise.resolve(window.pageId)}},107:function(e,t,n){"use strict";n.d(t,"g",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p}));var a=n(1),s=n(432),i=n(436),o=n(142);var r=n(251);async function c(e,t){let{syncConfig:n}=await a.c.sync.get("syncConfig");n||(n={}),n[e]=t,await a.c.sync.set({syncConfig:n})}async function l(e){e?await c(e,null):await a.c.sync.remove("syncConfig")}async function d(e,t){await async function(e,t){return(await Object(o.a)()).syncmeta.put({id:e,json:t})}(e,JSON.stringify(t))}async function u(e){const t=await async function(e){return(await Object(o.a)()).syncmeta.where("id").equals(e).first(e=>e&&e.json).catch(e=>{!1})}(e);if(t)return JSON.parse(t)}async function h(e){await Object(i.c)({area:"notebook",words:e})}async function f(){return(await Object(s.a)({area:"notebook"})).words||[]}async function p(e,t,n="",a=""){const{i18n:s}=await r.a.getInstance();await s.loadNamespaces("sync");const i="string"==typeof t?t:t.message,o=`sync:${e}.error.${i}`,c=s.exists(o)?s.t(o):"Unknown error: "+i;browser.notifications.create({type:"basic",iconUrl:browser.runtime.getURL("assets/icon-128.png"),title:"Saladict "+s.t(`sync:${e}.title`),message:n+c+a,eventTime:Date.now()+2e4,priority:2})}},11:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"f",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l}));var a=n(1);function s(e){return e?{date:e.date||Date.now(),text:e.text||"",context:e.context||"",title:e.title||"",url:e.url||"",favicon:e.favicon||"",trans:e.trans||"",note:e.note||""}:{date:Date.now(),text:"",context:"",title:"",url:"",favicon:"",trans:"",note:""}}function i(e){return a.a.send({type:"IS_IN_NOTEBOOK",payload:e}).catch((t=!1,e=>t));var t}async function o(e,t){await a.a.send({type:"SAVE_WORD",payload:{area:e,word:t}})}async function r(e,t){await a.a.send({type:"SYNC_SERVICE_DOWNLOAD"}),await a.a.send({type:"DELETE_WORDS",payload:{area:e,dates:t}})}function c(e,t){return a.a.send({type:"GET_WORDS_BY_TEXT",payload:{area:e,text:t}})}function l(e,t){return a.a.send({type:"GET_WORDS",payload:{area:e,...t}})}},113:function(e,t,n){"use strict";function a(){return Date.now().toString().slice(6)+Math.random().toString().slice(2,8)}n.d(t,"a",(function(){return a}))},1207:function(e,t,n){n(1208),e.exports=n(1310)},1209:function(e,t,n){var a={"./ankiconnect/index.ts":535,"./shanbay/index.ts":536,"./webdav/index.ts":505};function s(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=i,e.exports=s,s.id=1209},1210:function(e,t,n){var a={"./baidu/engine.ts":[542,2,27],"./bing/engine.ts":[821,38],"./caiyun/engine.ts":[822,2,26],"./cambridge/engine.ts":[824,30],"./cnki/engine.ts":[825,39],"./cobuild/engine.ts":[826,31],"./etymonline/engine.ts":[827,40],"./eudic/engine.ts":[828,41],"./google/engine.ts":[829,2,29],"./googledict/engine.ts":[831,32],"./guoyu/engine.ts":[637,55],"./hjdict/engine.ts":[832,33],"./jikipedia/engine.ts":[833,42],"./jukuu/engine.ts":[834,43],"./lexico/engine.ts":[835,34],"./liangan/engine.ts":[836,54],"./longman/engine.ts":[837,35],"./macmillan/engine.ts":[838,44],"./mojidict/engine.ts":[839,56],"./naver/engine.ts":[840,45],"./renren/engine.ts":[841,46],"./shanbay/engine.ts":[842,47],"./sogou/engine.ts":[843,2,28],"./tencent/engine.ts":[845,2,23],"./urban/engine.ts":[847,48],"./vocabulary/engine.ts":[848,49],"./weblio/engine.ts":[849,50],"./weblioejje/engine.ts":[850,36],"./websterlearner/engine.ts":[851,51],"./wikipedia/engine.ts":[852,52],"./youdao/engine.ts":[853,53],"./youdaotrans/engine.ts":[854,2,25],"./zdic/engine.ts":[856,37]};function s(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],s=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(s)}))}s.keys=function(){return Object.keys(a)},s.id=1210,e.exports=s},1310:function(e,t,n){"use strict";n.r(t);var a=n(134),s=n.n(a),i=n(1);const o=browser.runtime.id!==atob("Y2Rvbm5tZmZrZGFvYWpma25vZWVlY21jaGlicG1rbWc=")&&browser.runtime.id!==atob("c2FsYWRpY3RAY3JpbXguY29t")&&browser.runtime.id!==atob("aWRnaG9jYmJhaGFmcGZoam5maHBiZmJtcGVncGhtbXA=");async function r(e,t){if(!t)try{const e=window.appConfig.langCode.startsWith("zh"),n=await fetch(`https://saladict.crimx.com/releases/${e?"chs":"eng"}.json`);t=await n.json()}catch(e){console.error(e)}if(!t)return{diff:0};if(!e)return{diff:3,data:t};const n=e.split(".").map(Number),a=t.version.slice(1).split(".").map(Number);for(let e=0;e<3;e++){if(a[e]>n[e])return{diff:3-e,data:t};if(a[e]<n[e])return{diff:e-3,data:t}}return{diff:0,data:t}}var c=n(29),l=n(40);async function d(e){if(e&&e.id){const t=e.id,n=browser.runtime.getManifest();if(n.content_scripts)for(const e of n.content_scripts){if(e.js)for(const n of e.js)await browser.tabs.executeScript(t,{file:"/"===n[0]?n:"/"+n,allFrames:e.all_frames,matchAboutBlank:e.match_about_blank,runAt:e.run_at});if(e.css)for(const n of e.css)await browser.tabs.insertCSS(t,{file:"/"===n[0]?n:"/"+n,allFrames:e.all_frames,matchAboutBlank:e.match_about_blank,runAt:e.run_at})}}}var u=n(2),h=n(46),f=n(310),p=n(149),g=n(492),w=n.n(g),b=(n(717),n(251)),m=n(704),y=n(176),C=n(38),_=n(1323);function v(e){browser.webRequest.onBeforeRequest.hasListener(k)||(e.pdfSniff&&z(),Object(c.a)(({newConfig:e,oldConfig:t})=>{e&&(t&&e.pdfSniff===t.pdfSniff||(e.pdfSniff?z():(browser.webRequest.onBeforeRequest.removeListener(k),browser.webRequest.onHeadersReceived.removeListener(j))))}))}async function T(e,t){let n=browser.runtime.getURL("assets/pdf/web/viewer.html");if(e)n+="?file="+encodeURIComponent(e);else{const e=await browser.tabs.query({active:!0,currentWindow:!0});if(e.length>0&&e[0].url){const a=e[0].url;if(a.startsWith(n)){if(!window.appConfig.pdfStandalone)return;null!=e[0].id&&await browser.tabs.remove(e[0].id),n=a}else(t||a.endsWith("pdf"))&&(n+="?file="+encodeURIComponent(a))}}return window.appConfig.pdfStandalone?O(n):Object(i.b)({url:n,unique:!1})}function z(){browser.webRequest.onBeforeRequest.hasListener(k)||browser.webRequest.onBeforeRequest.addListener(k,{urls:["ftp://*/*.pdf","ftp://*/*.PDF","file://*/*.pdf","file://*/*.PDF"],types:["main_frame","sub_frame"]},["blocking"]),browser.webRequest.onHeadersReceived.hasListener(j)||browser.webRequest.onHeadersReceived.addListener(j,{urls:["https://*/*","https://*/*","http://*/*","http://*/*"],types:["main_frame","sub_frame"]},["blocking","responseHeaders"])}function k({tabId:e,url:t}){const n=([e])=>new RegExp(e).test(t);if(window.appConfig.pdfBlacklist.some(n)&&!window.appConfig.pdfWhitelist.some(n))return;const a=browser.runtime.getURL("assets/pdf/web/viewer.html?file="+encodeURIComponent(t));return-1!==e&&"always"===window.appConfig.pdfStandalone?(browser.tabs.remove(e),O(a),{cancel:!0}):{redirectUrl:a}}function j({tabId:e,responseHeaders:t,url:n}){if(!t)return;const a=([e])=>new RegExp(e).test(n);if(window.appConfig.pdfBlacklist.some(a)&&!window.appConfig.pdfWhitelist.some(a))return;const s=t.find(({name:e})=>"content-type"===e.toLowerCase());if(s&&s.value){const t=s.value.toLowerCase();if(t.endsWith("pdf")||"application/octet-stream"===t&&n.endsWith(".pdf")){const t=browser.runtime.getURL("assets/pdf/web/viewer.html?file="+encodeURIComponent(n));return-1!==e&&"always"===window.appConfig.pdfStandalone?(browser.tabs.remove(e),O(t),{cancel:!0}):{redirectUrl:t}}}}function O(e){return browser.windows.create({type:"popup",url:e})}async function S(e){if(!await browser.permissions.contains({permissions:["clipboardWrite"]}))return void Object(i.b)("options.html?menuselected=Permissions&missing_permission=clipboardWrite",!0);const t=document.createElement("textarea");t.textContent=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.blur(),document.body.removeChild(t)}async function N(){if(!await browser.permissions.contains({permissions:["clipboardRead"]}))return Object(i.b)("options.html?menuselected=Permissions&missing_permission=clipboardRead",!0),"";{let e=document.getElementById("saladict-paste");return e||(e=document.createElement("textarea"),e.id="saladict-paste",document.body.appendChild(e)),e.value="",e.focus(),document.execCommand("paste"),e.value||""}}function W(e){return fetch("http://dict-mobile.iciba.com/interface/index.php?c=word&m=getsuggest&nums=10&client=6&uid=0&is_need_mean=1&word="+encodeURIComponent(e)).then(e=>e.json()).then(e=>{if(e&&Array.isArray(e.message))return e.message.filter(e=>e&&e.key).map(e=>({entry:e.key,explain:Array.isArray(e.means)&&e.means.length>0?e.means[0].part+" "+e.means[0].means.join(" "):""}));throw new Error})}function A(e){return fetch("https://dict.youdao.com/suggest?doctype=json&le=en&ver=2.0&q="+encodeURIComponent(e)).then(e=>e.json()).then(e=>{if(e&&e.data&&Array.isArray(e.data.entries))return e.data.entries.filter(e=>e&&e.explain&&e.entry);throw new Error})}var E=n(11),x=n(432),L=n(436),I=n(95),D=n(64),P=n(161),U=n(10),F=n(107);const M=n(1209),R=M.keys().reduce((e,t)=>{const n=M(t).Service;return e.set(n.id,n)},new Map),$=new Map;async function q(e){$.forEach(async(t,n)=>{try{"ADD"===e.action?await t.add({words:e.words,force:e.force}):"DELETE"===e.action&&await t.delete({dates:e.dates,force:e.force})}catch(t){var a,s;Object(F.c)(n,t,"ADD"===e.action&&(null===(a=e.words)||void 0===a?void 0:a[0])?`「${null===(s=e.words)||void 0===s?void 0:s[0].text}」`:"")}})}class B{static getInstance(){return B.instance||(B.instance=new B)}constructor(){this.audio=void 0,this.currentSrc=void 0}reset(){this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.audio.src="",this.audio.onended=null),this.currentSrc=""}load(e){return this.reset(),this.currentSrc=e,this.audio=new Audio(e)}async play(e){if(!e||e===this.currentSrc)return void this.reset();const t=this.load(e),n=Promise.race([new Promise(e=>{t.onended=e}),Object(h.d)(2e4)]);await t.play(),await n,this.currentSrc=""}}B.instance=void 0;const H=(...e)=>browser.windows.update(...e).catch(console.warn);class J{constructor(){this.snapshot=null}async correctTop(e){if(!e)return e;const t=await Object(f.b)();return t?e-t.main:e}async focus(){this.snapshot&&null!=this.snapshot.id&&await H(this.snapshot.id,{focused:!0})}async takeSnapshot(){this.snapshot=null;try{const e=await browser.windows.getLastFocused({windowTypes:["normal"]});if(e.focused&&"normal"===e.type&&"minimized"!==e.state)this.snapshot=e;else if(u.c){const e=(await browser.windows.getAll()).filter(e=>e.focused&&"normal"===e.type&&"minimized"!==e.state);if(1===e.length)this.snapshot=e[0];else{const t=e.filter(e=>e.focused);1===t.length&&(this.snapshot=t[0])}}}catch(e){console.warn(e)}return this.snapshot}destroySnapshot(){this.snapshot=null}async makeRoomForSidebar(e,t){const n=this.snapshot;if(!n||null==n.id)return;const a=t&&t.width||window.appConfig.panelWidth,s=null!=n.top&&null!=n.left&&null!=n.width&&null!=n.height?{top:await this.correctTop(n.top),left:"right"===e?n.left:n.left+a,width:n.width-a,height:n.height,state:"normal"}:{top:0,left:"right"===e?0:a,width:window.screen.availWidth-a,height:window.screen.availHeight,state:"normal"};"right"===e&&await H(n.id,{...s,left:s.left+1}),await H(n.id,s)}async restoreSnapshot(){this.snapshot&&null!=this.snapshot.id&&await H(this.snapshot.id,"normal"===this.snapshot.state?{top:await this.correctTop(this.snapshot.top),left:this.snapshot.left,width:this.snapshot.width,height:this.snapshot.height}:{state:this.snapshot.state})}}class G{constructor(){this.qsPanelId=null,this.snapshot=null,this.isSidebar=!1,this.mainWindowsManager=new J}async correctTop(e){if(!e)return e;const t=await Object(f.b)();return t?e-t.panel:e}async create(e){this.isSidebar=!1;let t="",n="";if(e)try{t="&word="+encodeURIComponent(JSON.stringify(e))}catch(e){!1}else if("selection"===window.appConfig.qsPreload){const e=(await browser.tabs.query({active:!0,lastFocusedWindow:!0}))[0];e&&e.id&&(n="&lastTab="+e.id)}await this.mainWindowsManager.takeSnapshot();const a=window.appConfig.qssaSidebar?await this.getSidebarRect(window.appConfig.qssaSidebar):window.appConfig.qssaRectMemo&&await this.getStorageRect()||this.getDefaultRect();let s;try{s=await browser.windows.create({...a,type:"popup",url:browser.runtime.getURL(`quick-search.html?sidebar=${window.appConfig.qssaSidebar}${t}${n}`)})}catch(e){browser.notifications.create({type:"basic",iconUrl:browser.runtime.getURL("assets/icon-128.png"),title:"Saladict",message:e.message,priority:2,eventTime:Date.now()+5e3})}s&&s.id&&(u.c&&H(s.id,a),this.qsPanelId=s.id,window.appConfig.qssaSidebar&&(this.isSidebar=!0,await this.mainWindowsManager.makeRoomForSidebar(window.appConfig.qssaSidebar,s)),window.appConfig.qsFocus||await this.mainWindowsManager.focus(),(await browser.tabs.query({})).forEach(e=>{e.id&&e.windowId!==this.qsPanelId&&i.a.send(e.id,{type:"QS_PANEL_CHANGED",payload:null!=this.qsPanelId})}))}async getWin(){return this.qsPanelId?browser.windows.get(this.qsPanelId).catch(()=>null):null}async destroy(){(await browser.tabs.query({})).forEach(e=>{e.id&&e.windowId!==this.qsPanelId&&i.a.send(e.id,{type:"QS_PANEL_CHANGED",payload:!1})}),this.qsPanelId=null,this.isSidebar=!1,this.destroySnapshot(),await this.mainWindowsManager.restoreSnapshot(),this.mainWindowsManager.destroySnapshot()}isQsPanel(e){return null!=e&&e===this.qsPanelId}async hasCreated(){const e=await this.getWin();return e||(this.qsPanelId=null),!!e}async focus(){if(null!=this.qsPanelId){await H(this.qsPanelId,{focused:!0});const[e]=await browser.tabs.query({windowId:this.qsPanelId});e&&e.id&&await i.a.send(e.id,{type:"QS_PANEL_FOCUSED"})}}async takeSnapshot(){null!=this.qsPanelId&&(this.snapshot=await browser.windows.get(this.qsPanelId).catch(()=>null))}destroySnapshot(){this.snapshot=null}async restoreSnapshot(){await this.mainWindowsManager.restoreSnapshot(),null!=this.snapshot&&null!=this.snapshot.id?await H(this.snapshot.id,{top:await this.correctTop(this.snapshot.top),left:this.snapshot.left,width:this.snapshot.width,height:this.snapshot.height}):null!=this.qsPanelId&&await H(this.qsPanelId,{focused:!0,...this.getDefaultRect()}),this.destroySnapshot()}async moveToSidebar(e){null!=this.qsPanelId&&(await this.takeSnapshot(),await H(this.qsPanelId,await this.getSidebarRect(e)),await this.mainWindowsManager.makeRoomForSidebar(e,this.snapshot))}async toggleSidebar(e){await this.hasCreated()&&(this.isSidebar?await this.restoreSnapshot():await this.moveToSidebar(e),this.isSidebar=!this.isSidebar)}getDefaultRect(){const{qsLocation:e,qssaHeight:t}=window.appConfig;let n=10,a=30;const s=window.appConfig.panelWidth,i=window.appConfig.qssaHeight;switch(e){case"CENTER":n=(window.screen.availWidth-s)/2,a=(window.screen.availHeight-t)/2;break;case"TOP":n=(window.screen.availWidth-s)/2,a=30;break;case"RIGHT":n=window.screen.availWidth-s-30,a=(window.screen.availHeight-t)/2;break;case"BOTTOM":n=(window.screen.availWidth-s)/2,a=window.screen.availHeight-i-10;break;case"LEFT":n=10,a=(window.screen.availHeight-t)/2;break;case"TOP_LEFT":n=10,a=30;break;case"TOP_RIGHT":n=window.screen.availWidth-s-30,a=30;break;case"BOTTOM_LEFT":n=10,a=window.screen.availHeight-i-10;break;case"BOTTOM_RIGHT":n=window.screen.availWidth-s-30,a=window.screen.availHeight-i-10}return{top:Math.round(a+(window.screen.availTop||0)),left:Math.round(n+(window.screen.availLeft||0)),width:Math.round(s),height:Math.round(i)}}async getStorageRect(){const{qssaRect:e}=await i.c.local.get("qssaRect");return e?{...e,top:await this.correctTop(e.top)||0}:null}async getSidebarRect(e){const t=this.snapshot&&this.snapshot.width||window.appConfig.panelWidth,n=this.mainWindowsManager.snapshot;return n&&"normal"===n.state&&null!=n.top&&null!=n.left&&null!=n.width&&null!=n.height?{top:Math.round(await this.mainWindowsManager.correctTop(n.top)||0),left:Math.round("right"===e?Math.max(n.width-t,t):n.left),width:Math.round(t),height:Math.round(n.height)}:{top:0,left:Math.round("right"===e?window.screen.availWidth-t:0),width:Math.round(t),height:Math.round(window.screen.availHeight)}}}class V{static getInstance(){return V.instance||(V.instance=new V)}static getDictEngine(e){return n(1210)(`./${e}/engine.ts`)}constructor(){this.qsPanelManager=void 0,this.qsPanelManager=new G,i.a.addListener((e,t)=>{switch(e.type){case"OPEN_DICT_SRC_PAGE":return this.openSrcPage(e.payload);case"OPEN_URL":return Object(i.b)(e.payload);case"PLAY_AUDIO":return B.getInstance().play(e.payload);case"STOP_AUDIO":return void B.getInstance().reset();case"FETCH_DICT_RESULT":return this.fetchDictResult(e.payload);case"DICT_ENGINE_METHOD":return this.callDictEngineMethod(e.payload);case"GET_CLIPBOARD":return N();case"SET_CLIPBOARD":return Promise.resolve(S(e.payload));case"INJECT_DICTPANEL":return d(t.tab);case"QUERY_QS_PANEL":return this.qsPanelManager.hasCreated();case"OPEN_QS_PANEL":return this.openQSPanel();case"CLOSE_QS_PANEL":return B.getInstance().reset(),this.qsPanelManager.destroy();case"QS_SWITCH_SIDEBAR":return this.qsPanelManager.toggleSidebar(e.payload);case"IS_IN_NOTEBOOK":return Object(x.c)(e.payload);case"SAVE_WORD":return(a=e.payload,"notebook"===a.area&&a.word&&q({action:"ADD",words:[a.word]}),Object(L.b)(a)).then(e=>(this.notifyWordSaved(),e));case"DELETE_WORDS":return(e=>("notebook"===e.area&&q({action:"DELETE",dates:e.dates}),Object(L.a)(e)))(e.payload).then(e=>(this.notifyWordSaved(),e));case"GET_WORDS_BY_TEXT":return Object(x.b)(e.payload);case"GET_WORDS":return Object(x.a)(e.payload);case"GET_SUGGESTS":return n=e.payload,Object(h.a)([W(n),A(n)]).catch(()=>[]);case"YOUDAO_TRANSLATE_AJAX":return this.youdaoTranslateAjax(e.payload)}var n,a}),browser.runtime.onConnect.addListener(e=>{"popup"===e.name&&e.onDisconnect.addListener(()=>{B.getInstance().reset()})})}async openQSPanel(){await this.qsPanelManager.hasCreated()?await this.qsPanelManager.focus():await this.qsPanelManager.create()}async searchClipboard(){const e=Object(E.e)({text:await N()});await this.qsPanelManager.hasCreated()?await i.a.send({type:"QS_PANEL_SEARCH_TEXT",payload:e}):await this.qsPanelManager.create(e)}async searchPageSelection(){const e=await browser.tabs.query({active:!0,lastFocusedWindow:!0});let t;e.length>0&&null!=e[0].id&&(t=await i.a.send(e[0].id,{type:"PRELOAD_SELECTION"}));await this.qsPanelManager.hasCreated()?await this.qsPanelManager.focus():await this.qsPanelManager.create(t)}async openSrcPage({id:e,text:t,active:n}){const a=await V.getDictEngine(e);return Object(i.b)({url:await a.getSrcPage(t,window.appConfig,window.activeProfile),active:n})}async fetchDictResult(e){const t=e.payload||{};let n;try{const{search:a}=await V.getDictEngine(e.id);try{n=await Object(h.c)(a(e.text,window.appConfig,window.activeProfile,t),25e3)}catch(s){if("NETWORK_ERROR"!==s.message)throw s;await Object(h.d)(500),n=await Object(h.c)(a(e.text,window.appConfig,window.activeProfile,t),25e3)}}catch(e){!1}const a=n?{...n,id:e.id}:{result:null,id:e.id};return a}async callDictEngineMethod(e){return(await V.getDictEngine(e.id))[e.method](...e.args||[])}notifyWordSaved(){browser.tabs.query({}).then(e=>{e.forEach(async e=>{if(e.id&&e.url)try{await i.a.send(e.id,{type:"WORD_SAVED"})}catch(e){console.warn(e)}})})}youdaoTranslateAjax(e){return new Promise(t=>{const n=new XMLHttpRequest;n.onreadystatechange=()=>{if(4===n.readyState){const a=200===n.status?n.responseText:null;t({response:a,index:e.index})}},n.open(e.type,e.url,!0),"POST"===e.type?(n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(e.data)):n.send(null)})}}V.instance=void 0,V.init=V.getInstance;class Y{static async getInstance(){if(!Y.instance){const e=new Y;Y.instance=e;const t=await b.a.getInstance(),n=Object(c.b)().pipe(Object(y.a)((e,t)=>e&&t&&w()(e.contextMenus.selected,t.contextMenus.selected)),Object(C.a)(e=>!!e));Object(m.a)(n,t.getFixedT$("menus")).pipe(Object(_.a)(e.setContextMenus)).subscribe()}return Y.instance}static openGoogle(){return K({file:"/assets/google-page-trans.js"},"google_page_translate")}static openCaiyunTrs(){if(!u.c)return K({file:"/assets/trs.js"},"caiyuntrs")}static async openYoudao(){if(u.c)return;const e=await K({file:"/assets/fanyi.youdao.2.0/main.js"},"youdao_page_translate");(!e||1!==e&&1!==e[0])&&await browser.notifications.create({type:"basic",eventTime:Date.now()+4e3,iconUrl:browser.runtime.getURL("assets/icon-128.png"),title:"Saladict",message:(await b.a.getInstance()).i18n.t("menus:notification_youdao_err")})}static openBaiduPage(){browser.tabs.query({active:!0,currentWindow:!0}).then(e=>{if(e.length>0&&e[0].url){const t="zh-CN"===window.appConfig.langCode?"zh":"zh-TW"===window.appConfig.langCode?"cht":"en";Object(i.b)(`https://fanyi.baidu.com/transpage?query=${encodeURIComponent(e[0].url)}&from=auto&to=${t}&source=url&render=1`)}})}static openSogouPage(){browser.tabs.query({active:!0,currentWindow:!0}).then(e=>{if(e.length>0&&e[0].url){const t="zh-CN"===window.appConfig.langCode?"zh-CHS":"en";Object(i.b)(`https://translate.sogoucdn.com/pcvtsnapshot?from=auto&to=${t}&tfr=translatepc&url=${encodeURIComponent(e[0].url)}&domainType=sogou`)}})}static openMicrosoftPage(){browser.tabs.query({active:!0,currentWindow:!0}).then(e=>{if(e.length>0&&e[0].url){const t="zh-CN"===window.appConfig.langCode?"zh-Hans":"zh-TW"===window.appConfig.langCode?"zh-Hant":"en";Object(i.b)(`https://www.microsofttranslator.com/bv.aspx?from=auto&to=${t}&r=true&a=${encodeURIComponent(e[0].url)}`)}})}static requestSelection(){browser.tabs.query({active:!0,currentWindow:!0}).then(e=>{e.length>0&&null!=e[0].id&&i.a.send(e[0].id,{type:"EMIT_SELECTION"})})}handleContextMenusClick(e){const t=String(e.menuItemId).replace(/_ba$/,""),n=e.selectionText||"",a=e.linkUrl||"";switch(t){case"google_page_translate":Y.openGoogle();break;case"caiyuntrs":Y.openCaiyunTrs();break;case"google_cn_page_translate":Y.openGoogle();break;case"youdao_page_translate":Y.openYoudao();break;case"baidu_page_translate":Y.openBaiduPage();break;case"sogou_page_translate":Y.openSogouPage();break;case"microsoft_page_translate":Y.openMicrosoftPage();break;case"view_as_pdf":T(a,"view_as_pdf_ba"!==e.menuItemId);break;case"copy_pdf_url":{const t=function(e){if(!e)return;const t=new URL(e);return decodeURIComponent(t.searchParams.get("file")||"")}(e.pageUrl);t&&S(t);break}case"saladict":Y.requestSelection();break;case"saladict_standalone":V.getInstance().searchPageSelection();break;case"search_history":Object(i.b)(browser.runtime.getURL("history.html"));break;case"notebook":Object(i.b)(browser.runtime.getURL("notebook.html"));break;default:{const e=window.appConfig.contextMenus.all[t];if(e){const t="string"==typeof e?e:e.url;t&&Object(i.b)(t.replace("%s",encodeURIComponent(n)))}}}}constructor(){browser.contextMenus.onClicked.addListener(e=>(Q(e.menuItemId,"From_Context_Menus"),this.handleContextMenusClick(e))),i.a.addListener("CONTEXT_MENUS_CLICK",({payload:e})=>(Q(e.menuItemId,"From_Browser_Action"),this.handleContextMenusClick(e)))}async setContextMenus([{searchHistory:e,contextMenus:t},n]){browser.extension.inIncognitoContext||await browser.contextMenus.removeAll();const a=["audio","editable","frame","image","link","selection","page","video"],s=new Set(["selection"]),i=[],o=[];for(const e of t.selected){let t;switch(e){case"caiyuntrs":case"google_page_translate":case"google_cn_page_translate":case"youdao_page_translate":case"sogou_page_translate":case"baidu_page_translate":case"microsoft_page_translate":t=a,o.push(e);break;case"view_as_pdf":s.add("link"),s.add("page"),t=["link","page"];break;case"copy_pdf_url":s.add("page"),t=["page"];break;default:t=["selection"]}i.push({id:e,title:r(e),contexts:t})}if(i.length>1){o.length>0&&a.forEach(e=>s.add(e)),await c({id:"saladict_container",title:n("saladict"),contexts:[...s]});for(const e of i)e.parentId="saladict_container",await c(e)}else i.length>0&&await c(i[0]);if(await c({id:"view_as_pdf_ba",title:n("view_as_pdf"),contexts:["browser_action","page_action"]}),o.length>2){await c({id:"saladict_ba_container",title:n("page_translations"),contexts:["browser_action","page_action"]});for(const e of o)await c({id:e+"_ba",parentId:"saladict_ba_container",title:r(e),contexts:["browser_action","page_action"]})}else if(o.length>0)for(const e of o)await c({id:e+"_ba",title:r(e),contexts:["browser_action","page_action"]});else await c({id:"google_cn_page_translate_ba",title:n("google_cn_page_translate"),contexts:["browser_action","page_action"]}),await c({id:"youdao_page_translate_ba",title:n("youdao_page_translate"),contexts:["browser_action","page_action"]});function r(e){const a=t.all[e];return a&&"string"!=typeof a?a.name:n(e)}function c(e){return new Promise(t=>{browser.contextMenus.create(e,()=>{browser.runtime.lastError&&console.error(browser.runtime.lastError),t()})})}await c({type:"separator",id:Date.now().toString(),contexts:["browser_action"]}),e&&await c({id:"search_history",title:n("history_title"),contexts:["browser_action"]}),await c({id:"notebook",title:n("notebook_title"),contexts:["browser_action"]})}}async function K(e,t){try{return await browser.tabs.executeScript(e)}catch(e){const{i18n:n}=await b.a.getInstance();return await browser.notifications.create({type:"basic",eventTime:Date.now()+4e3,iconUrl:browser.runtime.getURL("assets/icon-128.png"),title:"Saladict",message:n.t("menus:page_permission_err",{name:n.t("menus:"+t)})}),e}}function Q(e,t){switch(e=String(e).replace(/_ba$/,"")){case"google_page_translate":Object(p.a)({category:"Page_Translate",action:"Open_Google",label:t});break;case"caiyuntrs":Object(p.a)({category:"Page_Translate",action:"Open_Caiyun",label:t});break;case"google_cn_page_translate":Object(p.a)({category:"Page_Translate",action:"Open_Google",label:t});break;case"youdao_page_translate":Object(p.a)({category:"Page_Translate",action:"Open_Youdao",label:t});break;case"view_as_pdf":Object(p.a)({category:"PDF_Viewer",action:"Open_PDF_Viewer",label:t})}}Y.init=Y.getInstance,Y.instance=void 0,browser.runtime.onInstalled.addListener((async function({reason:e,previousVersion:t}){if(window.appConfig=await Object(c.d)(),window.activeProfile=await Object(l.i)(),await i.c.local.set(s()(await i.c.local.get(null),(e,t)=>t.startsWith("dict_")?null:"lastCheckUpdate"===t?Date.now():e)),"install"===e)(await i.c.sync.get("hasInstructionsShown")).hasInstructionsShown||(Object(i.b)("options.html?menuselected=Privacy&nopanel=true",!0),window.appConfig.langCode.startsWith("zh")?Object(i.b)("https://saladict.crimx.com/notice.html"):Object(i.b)("https://saladict.crimx.com/en/notice.html"),i.c.sync.set({hasInstructionsShown:!0}));else if("update"===e){const e=await r(browser.runtime.getManifest().version);if(e.data&&0===e.diff){const{diff:n,data:a}=await r(t,e.data);a&&n>=2&&setTimeout(()=>{const e=window.appConfig.langCode.startsWith("zh"),t={type:"basic",iconUrl:browser.runtime.getURL("assets/icon-128.png"),title:e?"沙拉查词已更新到 "+a.version:"Saladict has updated to "+a.version,message:a.data.map((e,t)=>`${t+1}. ${e}`).join("\n"),priority:2,eventTime:Date.now()+5e3};u.c||(t.buttons=[{title:e?"查看更新介绍":"More Info"}],t.silent=!0),browser.notifications.create("sd-install",t)},5e3)}}if(ee(),!u.c&&!await Object(f.b)()){const e=await Object(f.a)();e&&Object(f.c)(e)}})),browser.runtime.onStartup.addListener((function(){setTimeout(()=>{window.appConfig.updateCheck&&i.c.local.get("lastCheckUpdate").then(async({lastCheckUpdate:e})=>{const t=Date.now();if(e){if(t-e>6048e5){i.c.local.set({lastCheckUpdate:t});const{data:e,diff:n}=await r(browser.runtime.getManifest().version);if(e&&n>0){const t={type:"basic",iconUrl:browser.runtime.getURL("assets/icon-128.png"),title:X("%E6%B2%99%E6%8B%89%E6%9F%A5%E8%AF%8D"),message:`${X("%E5%8F%AF%E6%9B%B4%E6%96%B0%E8%87%B3")}【${e.version}】`};u.c||(t.buttons=[{title:X("%E6%9F%A5%E7%9C%8B%E6%9B%B4%E6%96%B0")}]),browser.notifications.create("sd-update",t)}}}else i.c.local.set({lastCheckUpdate:t})})},1e3),o&&i.c.local.get("swat").then(({swat:e})=>{const t=Date.now();if(e){if(t-e>864e6){i.c.local.set({swat:t});const e={type:"basic",iconUrl:browser.runtime.getURL("assets/icon-128.png"),title:X("%E6%B2%99%E6%8B%89%E6%9F%A5%E8%AF%8D"),message:X("%E6%AD%A4%E3%80%8C%E6%B2%99%E6%8B%89%E6%9F%A5%E8%AF%8D%E3%80%8D%E6%89%A9%E5%B1%95%E5%B7%B2%E8%A2%AB%E4%BA%8C%E6%AC%A1%E6%89%93%E5%8C%85%EF%BC%8C%E8%AF%B7%E5%9C%A8%E5%AE%98%E6%96%B9%E5%BB%BA%E8%AE%AE%E7%9A%84%E5%B9%B3%E5%8F%B0%E5%AE%89%E8%A3%85%E3%80%82")};u.c||(e.buttons=[{title:X("%E6%9F%A5%E7%9C%8B%E5%8F%AF%E9%9D%A0%E7%9A%84%E5%B9%B3%E5%8F%B0")}]),browser.notifications.create("sd-update",e)}}else i.c.local.set({swat:t})});setTimeout(()=>{ee()},1e3)})),browser.notifications.onClicked.addListener(Z("https://saladict.crimx.com/releases/")),browser.notifications.onButtonClicked&&browser.notifications.onButtonClicked.addListener(Z("https://saladict.crimx.com/releases/")),browser.commands.onCommand.addListener((function(e){switch(e){case"toggle-active":Object(c.f)({...window.appConfig,active:!window.appConfig.active});break;case"toggle-instant":browser.tabs.query({active:!0,currentWindow:!0}).then(e=>{e.length<=0||null==e[0].id||i.a.send(e[0].id,{type:"QUERY_PIN_STATE"}).then(e=>{const t=window.appConfig,{enable:n}=t[e?"pinMode":"mode"].instant;Object(c.f)({...t,mode:{...t.mode,instant:{...t.mode.instant,enable:!n}},pinMode:{...t.pinMode,instant:{...t.pinMode.instant,enable:!n}}})})});break;case"open-quick-search":V.getInstance().openQSPanel();break;case"open-google":Y.openGoogle(),Object(p.a)({category:"Page_Translate",action:"Open_Google",label:"From_Browser_Shortcut"});break;case"open-youdao":Y.openYoudao(),Object(p.a)({category:"Page_Translate",action:"Open_Youdao",label:"From_Browser_Shortcut"});break;case"open-caiyun":Y.openCaiyunTrs(),Object(p.a)({category:"Page_Translate",action:"Open_Caiyun",label:"From_Browser_Shortcut"});break;case"open-pdf":T(),Object(p.a)({category:"PDF_Viewer",action:"Open_PDF_Viewer",label:"From_Browser_Shortcut"});break;case"search-clipboard":V.getInstance().searchClipboard();break;case"next-history":case"prev-history":i.a.send({type:"SWITCH_HISTORY",payload:"next-history"===e?"next":"prev"}).then(t=>{if(!t)return browser.tabs.query({active:!0,currentWindow:!0}).then(t=>{if(!(t.length<=0||null==t[0].id))return i.a.send(t[0].id,{type:"SWITCH_HISTORY",payload:"next-history"===e?"next":"prev"})})});break;case"next-profile":case"prev-profile":{const t=window.activeProfile.id,n=window.profileIDList.findIndex(({id:e})=>e===t),a="next-profile"===e?1:-1,s=n<0?0:(n+a)%window.profileIDList.length;Object(l.l)(window.profileIDList[s].id).then(te)}break;case"profile-1":case"profile-2":case"profile-3":case"profile-4":case"profile-5":{const t=+e.slice(-1);t<window.profileIDList.length&&window.profileIDList[t].id!==window.activeProfile.id&&Object(l.l)(window.profileIDList[t].id).then(te)}break;case"add-notebook":!async function(){if(await i.a.send({type:"ADD_NOTEBOOK",payload:{popup:!0}}))return;const e=await browser.tabs.query({active:!0,currentWindow:!0});if(e.length<=0||null==e[0].id)return;i.a.send(e[0].id,{type:"ADD_NOTEBOOK",payload:{popup:!1}})}()}}));const X=decodeURI;function Z(e){return function(t){switch(t){case"sd-install":case"sd-update":Object(i.b)(e),browser.notifications.getAll().then(e=>{Object.keys(e).forEach(e=>browser.notifications.clear(e))})}}}async function ee(){(await browser.tabs.query({})).forEach(async e=>{if(e.id&&e.url&&e.url.startsWith("http"))try{await d(e)}catch(e){console.warn(e)}})}async function te(){if(await Object(h.d)(10),await i.a.send({type:"SEARCH_TEXT_BOX"}))return;const e=await browser.tabs.query({active:!0,currentWindow:!0});e.length<=0||null==e[0].id||i.a.send(e[0].id,{type:"SEARCH_TEXT_BOX"})}var ne=n(91),ae=n(87);const se=new ne.a;function ie(e,t){browser.browserAction.setIcon({tabId:t,path:e?{16:"assets/icon-gray-16.png",19:"assets/icon-gray-19.png",24:"assets/icon-gray-24.png",38:"assets/icon-gray-38.png",48:"assets/icon-gray-48.png",128:"assets/icon-gray-128.png"}:{16:"assets/icon-16.png",19:"assets/icon-19.png",24:"assets/icon-24.png",38:"assets/icon-38.png",48:"assets/icon-48.png",128:"assets/icon-128.png"}})}se.pipe(Object(ae.e)("tabId",async e=>e.options?e:(e.delay&&await Object(h.d)(1e3),{tabId:e.tabId,options:await i.a.send(e.tabId,{type:"GET_TAB_BADGE_INFO"}).catch(()=>{})||{active:window.appConfig.active,tempDisable:!1,unsupported:!0}}))).subscribe(({tabId:e,options:t})=>t.active?t.tempDisable?function(e){ie(!0,e),browser.browserAction.setTitle({title:n(789)("./"+window.appConfig.langCode+"/background").locale.app.tempOff,tabId:e})}(e):t.unsupported?function(e){ie(!0,e),browser.browserAction.setTitle({title:n(789)("./"+window.appConfig.langCode+"/background").locale.app.unsupported,tabId:e})}(e):function(e){ie(!1,e)}(e):function(e){ie(!0,e),browser.browserAction.setTitle({title:n(789)("./"+window.appConfig.langCode+"/background").locale.app.off,tabId:e})}(e)),i.a.self.initServer(),Object(I.a)(Object(D.a)(i.c.sync.get("syncConfig")).pipe(Object(P.a)("syncConfig")),i.c.sync.createStream("syncConfig").pipe(Object(P.a)("newValue"))).pipe(Object(C.a)(e=>!!e),Object(U.a)(e=>(e.webdav&&!Object.prototype.hasOwnProperty.call(e.webdav,"enable")&&(e.webdav.enable=!!e.webdav.url),e))).subscribe(async e=>{try{await Promise.all([...$.values()].map(e=>e.destroy()))}catch(e){console.error(e)}$.clear(),e&&R.forEach(t=>{var n;if(null===(n=e[t.id])||void 0===n?void 0:n.enable){const n=new t(e[t.id]);$.set(t.id,n),n.onStart()}})}),Y.init(),V.init(),browser.runtime.onMessage.addListener(e=>{if("fetchUrl"===e.contentScriptQuery){const t={method:e.method||"GET",credentials:"include",headers:{...e.headers||{},"content-type":"application/json"}};if(e.data)try{t.body=JSON.stringify(e.data)}catch(e){}return fetch(e.url,t).then(e=>e.text()).then(e=>({status:"ok",data:e})).catch(e=>({status:"error",error:e}))}}),Object(c.c)().then(async e=>{window.appConfig=e,v(e),Object(p.b)("/background"),i.a.addListener("SEND_TAB_BADGE_INFO",({payload:e},t)=>{t.tab&&t.tab.id&&se.next({tabId:t.tab.id,options:e})}),browser.tabs.onUpdated.addListener(async(e,t)=>{"complete"===t.status&&se.next({tabId:e,delay:!0})}),Object(c.a)(({newConfig:e})=>{window.appConfig=e})}),Object(l.c)().subscribe(e=>{window.activeProfile=e}),Object(l.d)().subscribe(e=>{window.profileIDList=e})},142:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(749);class s extends a.a{constructor(){super("SaladictWords"),this.notebook=void 0,this.history=void 0,this.syncmeta=void 0,this.version(1).stores({notebook:"date,text,context,url",history:"date,text,context,url",syncmeta:"id"}),this.notebook=this.table("notebook"),this.history=this.table("history"),this.syncmeta=this.table("syncmeta")}}let i;async function o(){return i||(i=new s),i.isOpen()||await i.open(),i}},149:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return h}));var a=n(383),s=n.n(a),i=n(131),o=n.n(i),r=n(384),c=n.n(r),l=n(1),d=n(113);async function u(e){const t=new s.a,n=t.getBrowser(),a=t.getOS();try{await f({t:"pageview",dp:e,cd1:n.name||"None",cd2:(n.version||"0.0").split(".").slice(0,3).join("."),cd3:a.name||"None",cd4:a.version||"0.0",de:"UTF-8",dl:document.location.href,sd:screen.colorDepth+"-bit",sr:screen.width+"x"+screen.height,ul:"zh-cn"})}catch(e){console.error("Report pageview error",e)}}async function h(e){const t={t:"event",ec:e.category,ea:e.action};null!=e.label&&(t.el=e.label),null!=e.value&&(t.ev=e.value);try{await f(t)}catch(e){console.error("Report event error",e)}}async function f(e){let t=(await l.c.sync.get("gacid")).gacid;return t||(t=c()(),l.c.sync.set({gacid:t})),o()({url:"https://www.google-analytics.com/collect",method:"post",headers:{"content-type":"text/plain;charset=UTF-8"},data:new URLSearchParams({v:"1",tid:"UA-49163616-4",cid:t,z:Object(d.a)(),...e})})}},160:function(e,t,n){"use strict";n.d(t,"b",(function(){return b}));var a=n(78),s=n(81),i=n(73),o=n.n(i),r=n(90),c=n.n(r),l=n(100),d=n.n(l),u=n(57),h=n.n(u),f=n(21),p=n.n(f),g=n(27),w=n.n(g);function b(e,t){const n=t?JSON.parse(JSON.stringify(t)):Object(a.a)();let i=e.version;return i<13&&(e.showedDictAuth=!0),i<=9&&(i=10,["mode","pinMode","panelMode","qsPanelMode"].forEach(t=>{n[t].holding.shift=!1,n[t].holding.ctrl=!!e[t].ctrl,n[t].holding.meta=!!e[t].ctrl,delete e[t].ctrl})),r("tripleCtrlPreload","qsPreload"),r("tripleCtrlAuto","qsAuto"),r("tripleCtrlLocation","qsLocation"),r("tripleCtrlStandalone","qsStandalone"),r("tripleCtrlHeight","qssaHeight"),r("tripleCtrlSidebar","qssaSidebar"),r("tripleCtrlPageSel","qssaPageSel"),Object.keys(n).forEach(t=>{switch(t){case"langCode":g("langCode",e=>/^(zh-CN|zh-TW|en)$/.test(e));break;case"pdfWhitelist":case"pdfBlacklist":case"whitelist":case"blacklist":g(t,e=>Array.isArray(e));break;case"searhHistory":case"searchHistory":n.searchHistory=e[t];break;case"searhHistoryInco":case"searchHistoryInco":n.searchHistoryInco=e[t];break;case"mode":case"pinMode":case"panelMode":case"qsPanelMode":"mode"===t&&f("mode.icon"),f(t+".direct"),f(t+".double"),f(t+".holding.alt"),f(t+".holding.shift"),f(t+".holding.ctrl"),f(t+".holding.meta"),f(t+".instant.enable"),g(t+".instant.key",e=>/^(direct|ctrl|alt|shift)$/.test(e)),l(t+".instant.delay");break;case"qsPreload":g("qsPreload",e=>""===e||"clipboard"===e||"selection"===e);break;case"qsLocation":g("qsLocation",e=>"CENTER"===e||"TOP"===e||"RIGHT"===e||"BOTTOM"===e||"LEFT"===e||"TOP_LEFT"===e||"TOP_RIGHT"===e||"BOTTOM_LEFT"===e||"BOTTOM_RIGHT"===e);break;case"baPreload":g("baPreload",e=>""===e||"clipboard"===e||"selection"===e);break;case"ctxTrans":o()(n.ctxTrans,(e,t)=>{f("ctxTrans."+t)});break;case"language":o()(n.language,(e,t)=>{f("language."+t)});break;case"autopron":g("autopron.cn.dict",e=>s.a[e]),g("autopron.en.dict",e=>s.a[e]),g("autopron.en.accent",e=>"us"===e||"uk"===e),g("autopron.machine.dict",e=>s.a[e]),g("autopron.machine.src",e=>"trans"===e||"searchText"===e);break;case"contextMenus":o()(e.contextMenus.all,(e,t)=>{"string"==typeof e?n.contextMenus.all[t]&&u("contextMenus.all."+t):(u(`contextMenus.all.${t}.name`),u(`contextMenus.all.${t}.url`))}),function(t){const a=p()(e,[t,"selected"]);if(Array.isArray(a))if(0===a.length)w()(n,[t,"selected"],[]);else{const e=p()(n,[t,"all"]),s=a.filter(t=>e[t]);s.length>0&&w()(n,[t,"selected"],s)}}("contextMenus");break;case"dictAuth":g("dictAuth",Boolean);break;default:switch(typeof n[t]){case"string":u(t);break;case"boolean":f(t);break;case"number":l(t);break;default:console.error(new Error(`merge config: missing handler for '${t}'`))}}}),i=e.version,i<=10&&(i=11,n.contextMenus.selected.unshift("view_as_pdf")),i<=11&&(i=12,n.blacklist.push(["^https://stackedit.io(/.*)?$","https://stackedit.io/*"])),!1===e.language.minor&&(n.language.japanese=!1,n.language.korean=!1,n.language.french=!1,n.language.spanish=!1,n.language.deutsch=!1),n.panelMaxHeightRatio<1&&(n.panelMaxHeightRatio=Math.round(100*n.panelMaxHeightRatio)),n;function r(t,n){!Object.prototype.hasOwnProperty.call(e,n)&&Object.prototype.hasOwnProperty.call(e,t)&&(e[n]=e[t])}function l(e){return g(e,c.a)}function u(e){return g(e,d.a)}function f(e){return g(e,h.a)}function g(t,a){const s=p()(e,t);a(s)&&w()(n,t,s)}}t.a=b},165:function(e,t,n){"use strict";n.r(t),n.d(t,"auth",(function(){return a})),n.d(t,"url",(function(){return s}));const a={appid:"",key:""},s="http://api.fanyi.baidu.com/api/trans/product/prodinfo"},166:function(e,t,n){"use strict";n.r(t),n.d(t,"auth",(function(){return a})),n.d(t,"url",(function(){return s}));const a={token:""},s="https://fanyi.caiyunapp.com/#/api"},167:function(e,t,n){"use strict";n.r(t),n.d(t,"auth",(function(){return a})),n.d(t,"url",(function(){return s}));const a={pid:"",key:""},s="https://deepi.sogou.com/?from=translatepc"},168:function(e,t,n){"use strict";n.r(t),n.d(t,"auth",(function(){return a})),n.d(t,"url",(function(){return s}));const a={secretId:"",secretKey:""},s="https://curl.qcloud.com/imsowZzT"},169:function(e,t,n){"use strict";n.r(t),n.d(t,"auth",(function(){return a})),n.d(t,"url",(function(){return s}));const a={appKey:"",key:""},s="http://ai.youdao.com/gw.s"},17:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o}));var a=n(24);async function s(e,t,{options:n,options_sel:s},i,o){("none"===n.keepLF||"pdf"===n.keepLF&&!o.isPDF||"webpage"===n.keepLF&&o.isPDF)&&(t=t.replace(/\n+/g," "));let r=o.sl;r||(Object(a.g)(t)?r="ja":Object(a.h)(t)&&(r="ko")),r||(r=await e.detect(t));let c="";return o.tl?c=o.tl:"default"===n.tl?s.tl.includes(i.langCode)&&(c=i.langCode):c=n.tl,c||(c=s.tl.find(e=>"default"!==e)||"en"),r===c&&(o.tl?o.sl||(r="auto"):c="default"===n.tl2?c!==i.langCode?i.langCode:"en"!==c?"en":s.tl.find(e=>"default"!==e&&e!==c)||"en":n.tl2),{sl:r,tl:c,text:t}}function i(e,t,n,a){return{lang:"11111111",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:320,selectionWC:{min:1,max:999999999999999},...t,options:{keepLF:"webpage",slInitial:"collapse",tl:"default",tl2:"default",...n},options_sel:{keepLF:["none","all","webpage","pdf"],slInitial:["collapse","hide","full"],tl:["default",...e],tl2:["default",...e],...a}}}function o(e,t){const n=[{value:"auto",label:"%t(content:machineTrans.auto)"}];for(const e of t)n.push({value:e,label:`${e} %t(langcode:${e})`});const a=[{key:"sl",value:e.result.sl,title:"%t(content:machineTrans.sl)",options:n},{key:"tl",value:e.result.tl,title:"%t(content:machineTrans.tl)",options:n},{key:"copySrc",value:"copySrc",label:"%t(content:machineTrans.copySrc)"},{key:"copyTrans",value:"copyTrans",label:"%t(content:machineTrans.copyTrans)"}];return"hide"===e.result.slInitial&&a.push({key:"showSl",value:"",label:"%t(content:machineTrans.showSl)"}),{...e,catalog:a}}},178:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var a=n(74),s=n(73),i=n.n(s),o=n(90),r=n.n(o),c=n(100),l=n.n(c),d=n(57),u=n.n(d),h=n(21),f=n.n(h),p=n(27),g=n.n(p);function w(e,t){const n=t?JSON.parse(JSON.stringify(t)):Object(a.b)(e.id);return Object.keys(n).forEach(t=>{switch(t){case"dicts":(function(t){const a=f()(e,[t,"selected"]);if(Array.isArray(a))if(0===a.length)g()(n,[t,"selected"],[]);else{const e=f()(n,[t,"all"]),s=a.map(e=>"olad"===e?"lexico":e).filter(t=>e[t]);s.length>0&&g()(n,[t,"selected"],s)}})("dicts"),i()(n.dicts.all,(t,a)=>{const c=f()(e,`dicts.all.${a}.defaultUnfold`);u()(c)?g()(n,`dicts.all.${a}.defaultUnfold`,{chinese:c,english:c,japanese:c,korean:c,french:c,spanish:c,deutsch:c,others:c}):(o(`dicts.all.${a}.defaultUnfold.chinese`),o(`dicts.all.${a}.defaultUnfold.english`),o(`dicts.all.${a}.defaultUnfold.japanese`),o(`dicts.all.${a}.defaultUnfold.korean`),o(`dicts.all.${a}.defaultUnfold.french`),o(`dicts.all.${a}.defaultUnfold.spanish`),o(`dicts.all.${a}.defaultUnfold.deutsch`),o(`dicts.all.${a}.defaultUnfold.others`));const d=f()(e,`dicts.all.${a}.selectionLang.chs`);u()(d)?g()(n,`dicts.all.${a}.selectionLang.chinese`,d):o(`dicts.all.${a}.selectionLang.chinese`);const h=f()(e,`dicts.all.${a}.selectionLang.eng`);if(u()(h)?g()(n,`dicts.all.${a}.selectionLang.english`,h):o(`dicts.all.${a}.selectionLang.english`),o(`dicts.all.${a}.selectionLang.japanese`),o(`dicts.all.${a}.selectionLang.korean`),o(`dicts.all.${a}.selectionLang.french`),o(`dicts.all.${a}.selectionLang.spanish`),o(`dicts.all.${a}.selectionLang.deutsch`),o(`dicts.all.${a}.selectionLang.others`),s(`dicts.all.${a}.preferredHeight`),s(`dicts.all.${a}.selectionWC.min`),s(`dicts.all.${a}.selectionWC.max`),t.options){if(i()(t.options,(t,i)=>{if(r()(t))s(`dicts.all.${a}.options.${i}`);else if(u()(t))o(`dicts.all.${a}.options.${i}`);else if(l()(t)){const s=f()(e,`dicts.all.${a}.options.${i}`),o=f()(n,`dicts.all.${a}.options_sel.${i}`);g()(n,`dicts.all.${a}.options.${i}`,o.includes(s)?s:t)}}),!r()(e.version)){const e=["baidu","caiyun","google","sogou","tencent","youdaotrans"];e.every(e=>"hide"===f()(n,`dicts.all.${e}.options.slInitial`))&&e.forEach(e=>{g()(n,`dicts.all.${e}.options.slInitial`,"collapse")})}const c=f()(e,`dicts.all.${a}.options.pdfNewline`);u()(c)&&g()(n,`dicts.all.${a}.options.keepLF`,c?"all":"webpage")}});break;default:switch(typeof n[t]){case"string":c(t,l.a);break;case"boolean":o(t);break;case"number":s(t);break;default:console.error(new Error(`merge profile: missing handler for '${t}'`))}}}),"kor"===n.dicts.all.hjdict.options.chsas&&(n.dicts.all.hjdict.options.chsas="kr"),n;function s(e){return c(e,r.a)}function o(e){return c(e,u.a)}function c(t,a){const s=f()(e,t);a(s)&&g()(n,t,s)}}},2:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"h",(function(){return s})),n.d(t,"j",(function(){return i})),n.d(t,"i",(function(){return o})),n.d(t,"k",(function(){return r})),n.d(t,"l",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return p}));const a=()=>!!window.__SALADICT_INTERNAL_PAGE__,s=()=>!!window.__SALADICT_OPTIONS_PAGE__,i=()=>!!window.__SALADICT_POPUP_PAGE__,o=()=>!!window.__SALADICT_PDF_PAGE__,r=()=>!!window.__SALADICT_QUICK_SEARCH_PAGE__,c=()=>i()||r(),l="saladict-external",d="saladict-panel",u=navigator.userAgent.includes("Firefox"),h=navigator.userAgent.includes("OPR");function f(e){if(!e)return!1;for(let t=e;t;t=t.parentElement)if(t.classList&&t.classList.contains(l))return!0;return!1}function p(e){if(!e)return!1;for(let t=e;t;t=t.parentElement)if(t.classList&&t.classList.contains(d))return!0;return!1}},24:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"i",(function(){return h})),n.d(t,"b",(function(){return b})),n.d(t,"j",(function(){return m})),n.d(t,"a",(function(){return y}));var a=n(19);const s=["chinese","english","japanese","korean","french","spanish","deutsch"],i={chinese:/[\u4e00-\u9fa5]/,english:/[a-zA-Z]/,japanese:/[\u3041-\u3096\u30A0-\u30FF]/,korean:/[\u3131-\u4dff\u9fa6-\uD79D]/,french:/[\u00e0\u00e2\u00e4\u00e8\u00e9\u00ea\u00eb\u00ee\u00ef\u00f4\u0153\u00f9\u00fb\u00fc\u00ff\u00e7]/i,spanish:/[\u00e1\u00e9\u00ed\u00f3\u00fa\u00f1\u00fc\u00a1\u00bf]/i,deutsch:/[\u00E4\u00F6\u00FC\u00C4\u00D6\u00DC\u00df]/i},o=e=>i.chinese.test(e),r=e=>i.english.test(e),c=e=>i.japanese.test(e),l=e=>i.korean.test(e),d=e=>i.french.test(e),u=e=>i.deutsch.test(e),h=e=>i.spanish.test(e),f={chinese:Object(a.a)(o),english:Object(a.a)(r),japanese:Object(a.a)(c),korean:Object(a.a)(l),french:Object(a.a)(d),spanish:Object(a.a)(h),deutsch:Object(a.a)(u)},p=/[/[\]{}$^*+|?.\-~!@#%&()_='";:><,。？！，、；：“”﹃﹄「」﹁﹂‘’『』（）—［］〔〕【】…－～·‧《》〈〉﹏＿]/,g=new RegExp(`^(\\d|\\s|${p.source})+$`),w=new RegExp(`${i.chinese.source}|${i.japanese.source}|${i.korean.source}`),b=Object(a.a)(e=>(e.replace(new RegExp(p,"g")," ").replace(new RegExp(w,"g")," x ").match(/\S+/g)||"").length),m=[...s,"others","matchAll"];function y(e,t){if(!t)return!1;if(e.matchAll){if(g.test(t))return!1;if(e.others){const n=[/-|\.|\d|\s/],a=[];for(let t=s.length-1;t>=0;t--){const o=s[t];e[o]?n.push(i[o]):a.push(i[o])}for(let e=0;e<t.length;e++)if(n.every(n=>!n.test(t[e]))&&a.some(n=>n.test(t[e])))return!1;return!0}{const n=s.filter(t=>e[t]).map(e=>i[e]);n.push(/-|\.|\d|\s/);for(let e=t.length-1;e>=0;e--)if(n.every(n=>!n.test(t[e])))return!1;return!0}}{if(s.some(n=>e[n]&&f[n](t)))return!0;if(!e.others||g.test(t))return!1;const n=s.filter(t=>!e[t]).map(e=>i[e]);n.push(new RegExp(p.source+"|\\d|\\s"));for(let e=t.length-1;e>=0;e--)if(n.every(n=>!n.test(t[e])))return!0;return!1}}},250:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));class a{static getDefaultConfig(){return{}}static getDefaultMeta(){return{}}constructor(e){this.config=void 0,this.meta=void 0,this.config=e}async delete(e){}async destroy(){}async download(e){}onStart(){}}a.id=void 0},251:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(12),s=n(9),i=n(308),o=n(108);class r{static async getInstance(){if(!r.instance){const e=new r;r.instance=e,e.i18n=await Object(s.d)(),e.i18n$$.next(e.i18n)}return r.instance}constructor(){this.i18n=void 0,this.i18n$$=void 0,this.i18n=a.a,this.i18n$$=new i.a(this.i18n),this.i18n.on("languageChanged",()=>{this.i18n$$.next(this.i18n)})}getFixedT$(e){return this.i18n$$.pipe(Object(o.a)(async t=>(await this.i18n.loadNamespaces(e),t.getFixedT(t.language,e))))}}r.instance=void 0},259:function(e,t,n){var a={"./en/background.ts":[442,110],"./en/common.ts":[543,111],"./en/content.ts":[544,112],"./en/langcode.ts":[545,91],"./en/menus.ts":[546,113],"./en/options.ts":[547,114],"./en/popup.ts":[548,115],"./en/wordpage.ts":[549,116],"./zh-CN/background.ts":[443,117],"./zh-CN/common.ts":[550,118],"./zh-CN/content.ts":[551,119],"./zh-CN/langcode.ts":[552,92],"./zh-CN/menus.ts":[553,120],"./zh-CN/options.ts":[554,121],"./zh-CN/popup.ts":[555,122],"./zh-CN/wordpage.ts":[556,123],"./zh-TW/background.ts":[444,124],"./zh-TW/common.ts":[557,125],"./zh-TW/content.ts":[558,126],"./zh-TW/langcode.ts":[559,93],"./zh-TW/menus.ts":[560,127],"./zh-TW/options.ts":[561,128],"./zh-TW/popup.ts":[562,129],"./zh-TW/wordpage.ts":[563,130]};function s(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],s=t[0];return n.e(t[1]).then((function(){return n(s)}))}s.keys=function(){return Object.keys(a)},s.id=259,e.exports=s},260:function(e,t,n){var a={"./baidu/_locales.ts":261,"./bing/_locales.json":262,"./caiyun/_locales.ts":263,"./cambridge/_locales.json":264,"./cnki/_locales.json":265,"./cobuild/_locales.json":266,"./etymonline/_locales.json":267,"./eudic/_locales.json":268,"./google/_locales.ts":269,"./googledict/_locales.json":270,"./guoyu/_locales.json":271,"./hjdict/_locales.json":272,"./jikipedia/_locales.json":273,"./jukuu/_locales.json":274,"./lexico/_locales.json":275,"./liangan/_locales.json":276,"./longman/_locales.json":277,"./macmillan/_locales.json":278,"./mojidict/_locales.json":279,"./naver/_locales.json":280,"./renren/_locales.json":281,"./shanbay/_locales.json":282,"./sogou/_locales.ts":283,"./tencent/_locales.ts":284,"./urban/_locales.json":285,"./vocabulary/_locales.json":286,"./weblio/_locales.json":287,"./weblioejje/_locales.json":288,"./websterlearner/_locales.json":289,"./wikipedia/_locales.json":290,"./youdao/_locales.json":291,"./youdaotrans/_locales.ts":292,"./zdic/_locales.json":293};function s(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=i,e.exports=s,s.id=260},261:function(e,t,n){"use strict";n.r(t),n.d(t,"locales",(function(){return s}));var a=n(39);const s=Object(a.a)({en:"Baidu Translate","zh-CN":"百度翻译","zh-TW":"百度翻譯"})},262:function(e){e.exports=JSON.parse('{"name":{"en":"Bing Dict","zh-CN":"必应词典","zh-TW":"必應詞典"},"options":{"tense":{"en":"Show sense","zh-CN":"显示单词时态","zh-TW":"展示單詞時態"},"phsym":{"en":"Show pronunciation","zh-CN":"显示单词发音","zh-TW":"展示單詞發音"},"cdef":{"en":"Show definitions","zh-CN":"显示单词解释","zh-TW":"展示單詞解釋"},"related":{"en":"Show related results","zh-CN":"失败时显示备选","zh-TW":"失敗時顯示備選"},"sentence":{"en":"Show sentences","zh-CN":"显示例句","zh-TW":"展示例句"},"sentence_unit":{"en":"results","zh-CN":"个","zh-TW":"個"}}}')},263:function(e,t,n){"use strict";n.r(t),n.d(t,"locales",(function(){return s}));var a=n(39);const s=Object(a.a)({en:"LingoCloud","zh-CN":"彩云小译","zh-TW":"彩雲小譯"})},264:function(e){e.exports=JSON.parse('{"name":{"en":"Cambridge Dictionary","zh-CN":"剑桥词典","zh-TW":"劍橋詞典"},"options":{"lang":{"en":"Language","zh-CN":"语言","zh-TW":"語言"},"lang-default":{"en":"Default","zh-CN":"随扩展","zh-TW":"未設定"},"lang-en":{"en":"English","zh-CN":"English","zh-TW":"English"},"lang-en-chs":{"en":"English–Chinese (Simplified)","zh-CN":"英简","zh-TW":"英简"},"lang-en-chz":{"en":"English–Chinese (Traditional)","zh-CN":"英繁","zh-TW":"英繁"},"related":{"en":"Show related results","zh-CN":"失败时显示备选","zh-TW":"失敗時顯示備選"}}}')},265:function(e){e.exports=JSON.parse('{"name":{"en":"CNKI Dict","zh-CN":"CNKI翻译助手","zh-TW":"CNKI翻譯助手"},"options":{"dict":{"en":"Show dict result","zh-CN":"显示词典结果","zh-TW":"展示字典結果"},"senbi":{"en":"Show bilingual sentences","zh-CN":"显示双语例句","zh-TW":"展示雙語例句"},"seneng":{"en":"Show English sentences","zh-CN":"显示英文例句","zh-TW":"展示英文例句"},"digests":{"en":"Show relevant digests","zh-CN":"显示相关文摘","zh-TW":"展示相關文摘"}}}')},266:function(e){e.exports=JSON.parse('{"name":{"en":"COBUILD","zh-CN":"柯林斯高阶","zh-TW":"柯林斯高階"},"options":{"cibaFirst":{"en":"Prefer bilingual dictionary","zh-CN":"优先查双语词典","zh-TW":"優先查雙語詞典"}},"helps":{"cibaFirst":{"en":"Bilingual server is less stable","zh-CN":"双语词典服务器不稳定，解释没全英丰富","zh-TW":"雙語詞典伺服器不穩定，解釋沒全英豐富"}}}')},267:function(e){e.exports=JSON.parse('{"name":{"en":"Etymonline","zh-CN":"Etymonline","zh-TW":"Etymonline"},"options":{"resultnum":{"en":"Show","zh-CN":"结果数量","zh-TW":"結果數量"},"resultnum_unit":{"en":"results","zh-CN":"个","zh-TW":"個"},"chart":{"en":"Show Chart","zh-CN":"显示图表","zh-TW":"顯示圖表"}}}')},268:function(e){e.exports=JSON.parse('{"name":{"en":"Eudic","zh-CN":"双语例句","zh-TW":"雙語例句"},"options":{"resultnum":{"en":"Show","zh-CN":"结果数量","zh-TW":"結果數量"},"resultnum_unit":{"en":"results","zh-CN":"个","zh-TW":"個"}}}')},269:function(e,t,n){"use strict";n.r(t),n.d(t,"locales",(function(){return s}));var a=n(39);const s=Object(a.a)({en:"Google Translation","zh-CN":"谷歌翻译","zh-TW":"谷歌翻譯"},{cnfirst:{en:"Use google.cn first","zh-CN":"优先使用 google.cn","zh-TW":"優先使用 google.cn"},concurrent:{en:"Search concurrently","zh-CN":"并行查询","zh-TW":"並行查詢"}},{concurrent:{en:"Search .com and .cn concurrently","zh-CN":"同时搜索 .com 和 .cn 取最先返回的结果","zh-TW":"同時搜尋 .com 和 .cn 取最先返回的結果"}})},270:function(e){e.exports=JSON.parse('{"name":{"en":"Google Dictionary","zh-CN":"谷歌词典","zh-TW":"谷歌詞典"},"options":{"enresult":{"en":"English Result","zh-CN":"强制显示英文结果","zh-TW":"強制顯示英文結果"}}}')},271:function(e){e.exports=JSON.parse('{"name":{"en":"國語辭典","zh-CN":"国语辞典","zh-TW":"國語辭典"},"options":{"trans":{"en":"Show Translation","zh-CN":"显示翻译","zh-TW":"顯示翻譯"}},"helps":{"trans":{"en":"Show translation of other languages.","zh-CN":"显示其它语言的翻译。","zh-TW":"顯示其它語言的翻譯。"}}}')},272:function(e){e.exports=JSON.parse('{"name":{"en":"Hu Jiang","zh-CN":"沪江小D","zh-TW":"沪江小D"},"options":{"engas":{"en":"Treat English as","zh-CN":"对全英文使用词典","zh-TW":"對全英文使用字典"},"chsas":{"en":"Treat Chinese as","zh-CN":"对全中文使用词典","zh-TW":"對全中文使用字典"},"uas":{"en":"Treat \'ü\' as","zh-CN":"将 \'ü\' 字符当作","zh-TW":"把 \'ü\' 字元當成"},"aas":{"en":"Treat \'ä\' as","zh-CN":"将 \'ä\' 字符当作","zh-TW":"把 \'ä\' 字元當成"},"eas":{"en":"Treat \'é\' as","zh-CN":"将 \'é\' 字符当作","zh-TW":"把 \'é\' 字元當成"},"related":{"en":"Show related results","zh-CN":"失败时显示备选","zh-TW":"失敗時顯示備選"},"chsas-jp/cj":{"en":"中 → 日","zh-CN":"中 → 日","zh-TW":"中 → 日"},"chsas-jp/jc":{"en":"日 → 中","zh-CN":"日 → 中","zh-TW":"日 → 中"},"chsas-kr":{"en":"Korean","zh-CN":"韩文","zh-TW":"韓文"},"chsas-w":{"en":"English","zh-CN":"英文","zh-TW":"英文"},"chsas-fr":{"en":"French","zh-CN":"法文","zh-TW":"法文"},"chsas-de":{"en":"Deutsch","zh-CN":"德文","zh-TW":"德文"},"chsas-es":{"en":"Spanish","zh-CN":"西班牙文","zh-TW":"西班牙文"},"engas-w":{"en":"English","zh-CN":"英文","zh-TW":"英文"},"engas-fr":{"en":"French","zh-CN":"法文","zh-TW":"法文"},"engas-de":{"en":"Deutsch","zh-CN":"德文","zh-TW":"德文"},"engas-es":{"en":"Spanish","zh-CN":"西班牙文","zh-TW":"西班牙文"},"uas-fr":{"en":"French","zh-CN":"法文","zh-TW":"法文"},"uas-de":{"en":"Deutsch","zh-CN":"德文","zh-TW":"德文"},"uas-es":{"en":"Spanish","zh-CN":"西班牙文","zh-TW":"西班牙文"},"aas-fr":{"en":"French","zh-CN":"法文","zh-TW":"法文"},"aas-de":{"en":"Deutsch","zh-CN":"德文","zh-TW":"德文"},"eas-fr":{"en":"French","zh-CN":"法文","zh-TW":"法文"},"eas-es":{"en":"Spanish","zh-CN":"西班牙文","zh-TW":"西班牙文"}}}')},273:function(e){e.exports=JSON.parse('{"name":{"en":"Jikipedia","zh-CN":"小鸡词典","zh-TW":"小雞詞典"},"options":{"resultnum":{"en":"Show","zh-CN":"结果数量","zh-TW":"結果數量"},"resultnum_unit":{"en":"results","zh-CN":"个","zh-TW":"個"}}}')},274:function(e){e.exports=JSON.parse('{"name":{"en":"Jukuu","zh-CN":"句酷","zh-TW":"句酷"},"options":{"lang":{"en":"Language","zh-CN":"语言","zh-TW":"語言"},"lang-zheng":{"en":"Chinese-English","zh-CN":"中英","zh-TW":"中英"},"lang-engjp":{"en":"English-Japanese","zh-CN":"英日","zh-TW":"英日"},"lang-zhjp":{"en":"Chinese-Japanese","zh-CN":"中日","zh-TW":"中日"}}}')},275:function(e){e.exports=JSON.parse('{"name":{"en":"Lexico","zh-CN":"Lexico","zh-TW":"Lexico"},"options":{"related":{"en":"Show related results","zh-CN":"失败时显示备选","zh-TW":"失敗時顯示備選"}}}')},276:function(e){e.exports=JSON.parse('{"name":{"en":"兩岸詞典","zh-CN":"两岸词典","zh-TW":"兩岸詞典"},"options":{"trans":{"en":"Show Translation","zh-CN":"显示翻译","zh-TW":"顯示翻譯"}},"helps":{"trans":{"en":"Show translation of other languages.","zh-CN":"显示其它语言的翻译。","zh-TW":"顯示其它語言的翻譯。"}}}')},277:function(e){e.exports=JSON.parse('{"name":{"en":"Longman Dictionary","zh-CN":"朗文词典","zh-TW":"朗文詞典"},"options":{"wordfams":{"en":"Show word family","zh-CN":"显示单词家族","zh-TW":"展示單字家族"},"collocations":{"en":"Show collocations","zh-CN":"显示惯用搭配","zh-TW":"展示慣用搭配"},"grammar":{"en":"Show grammar","zh-CN":"显示语法解释","zh-TW":"展示文法講解"},"thesaurus":{"en":"Show thesaurus","zh-CN":"显示同义词","zh-TW":"展示同義詞"},"examples":{"en":"Show examples","zh-CN":"显示例句","zh-TW":"展示例句"},"bussinessFirst":{"en":"Show bussiness result first","zh-CN":"优先显示商务词典","zh-TW":"優先展示商務字典"},"related":{"en":"Show related results","zh-CN":"失败时显示备选","zh-TW":"失敗時顯示備選"}}}')},278:function(e){e.exports=JSON.parse('{"name":{"en":"Macmillan","zh-CN":"麦克米伦","zh-TW":"麥克米倫"},"options":{"related":{"en":"Show related results","zh-CN":"失败时显示备选","zh-TW":"失敗時顯示備選"},"locale":{"en":"Locale","zh-CN":"方言","zh-TW":"方言"},"locale-uk":{"en":"UK","zh-CN":"英式","zh-TW":"英式"},"locale-us":{"en":"US","zh-CN":"美式","zh-TW":"美式"}}}')},279:function(e){e.exports=JSON.parse('{"name":{"en":"MOJi辞書","zh-CN":"MOJi辞書","zh-TW":"MOJi辞書"}}')},280:function(e){e.exports=JSON.parse('{"name":{"en":"Naver韩国语词典","zh-CN":"Naver韩国语词典","zh-TW":"Naver韩国语词典"},"options":{"hanAsJa":{"en":"Search Chinese with Japanese Dictionary","zh-CN":"用日语词典查中文","zh-TW":"用日語詞典查漢字"},"korAsJa":{"en":"Search Korean with Japanese Dictionary","zh-CN":"用日语词典查韩语","zh-TW":"用日语词典查韓語"}}}')},281:function(e){e.exports=JSON.parse('{"name":{"en":"91dict","zh-CN":"人人词典","zh-TW":"人人詞典"}}')},282:function(e){e.exports=JSON.parse('{"name":{"en":"Shanbay Dictionary","zh-CN":"扇贝词典","zh-TW":"扇貝詞典"},"options":{"basic":{"en":"Show basic meaning","zh-CN":"显示简单释义","zh-TW":"顯示簡單解釋"},"sentence":{"en":"Show sentences","zh-CN":"显示权威例句","zh-TW":"顯示權威例句"}}}')},283:function(e,t,n){"use strict";n.r(t),n.d(t,"locales",(function(){return s}));var a=n(39);const s=Object(a.a)({en:"Sogou Translation","zh-CN":"搜狗翻译","zh-TW":"搜狗翻譯"})},284:function(e,t,n){"use strict";n.r(t),n.d(t,"locales",(function(){return s}));var a=n(39);const s=Object(a.a)({en:"Tencent Translate","zh-CN":"腾讯翻译君","zh-TW":"騰訊翻譯君"})},285:function(e){e.exports=JSON.parse('{"name":{"en":"Urban","zh-CN":"Urban","zh-TW":"Urban"},"options":{"resultnum":{"en":"Show","zh-CN":"结果数量","zh-TW":"結果數量"},"resultnum_unit":{"en":"results","zh-CN":"个","zh-TW":"個"}}}')},286:function(e){e.exports=JSON.parse('{"name":{"en":"Vocabulary.com","zh-CN":"Vocabulary.com","zh-TW":"Vocabulary.com"}}')},287:function(e){e.exports=JSON.parse('{"name":{"en":"Weblio","zh-CN":"Weblio 辞書","zh-TW":"Weblio 辞書"}}')},288:function(e){e.exports=JSON.parse('{"name":{"en":"Weblio ejje","zh-CN":"Weblio 英和和英","zh-TW":"Weblio 英和和英"}}')},289:function(e){e.exports=JSON.parse('{"name":{"en":"Merriam-Webster\'s Learner\'s Dictionary","zh-CN":"韦氏学习词典","zh-TW":"韋氏學習字典"},"options":{"defs":{"en":"Show definitions","zh-CN":"显示释义","zh-TW":"顯示解釋"},"phrase":{"en":"Show phrases","zh-CN":"显示词组","zh-TW":"顯示片語"},"derived":{"en":"Show derived words","zh-CN":"显示派生词","zh-TW":"顯示衍生字"},"arts":{"en":"Show pictures","zh-CN":"显示图片释义","zh-TW":"顯示圖片解釋"},"related":{"en":"Show related results","zh-CN":"失败时显示备选","zh-TW":"失敗時顯示備選"}}}')},29:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"f",(function(){return w})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var a=n(85),s=n.n(a),i=n(78),o=n(160),r=n(1),c=n(95),l=n(64),d=n(76),u=n(10);function h(e){return e&&1===e.v?JSON.parse(s.a.inflate(e.d,{to:"string"})):e}async function f(){let e=await g();return e=e&&e.version?Object(o.b)(e):Object(i.a)(),await w(e),e}async function p(){const e=Object(i.a)();return await w(e),e}async function g(){const{baseconfig:e}=await r.c.sync.get("baseconfig");return h(e||Object(i.a)())}function w(e){return r.c.sync.set({baseconfig:(t=e,{v:1,d:s.a.deflate(JSON.stringify(t),{to:"string"})})});var t}async function b(e){r.c.sync.addListener(t=>{if(t.baseconfig){const{newValue:n,oldValue:a}=t.baseconfig;n&&e({newConfig:h(n),oldConfig:h(a)})}})}function m(){return Object(c.a)(Object(l.a)(g()),Object(d.a)(b).pipe(Object(u.a)(e=>(Array.isArray(e)?e[0]:e).newConfig)))}},290:function(e){e.exports=JSON.parse('{"name":{"en":"Wikipedia","zh-CN":"维基百科","zh-TW":"維基百科"},"options":{"lang":{"en":"Language","zh-CN":"百科语言","zh-TW":"百科語言"},"lang-auto":{"en":"Auto (respect Wiki settings)","zh-CN":"自动（遵循维基账户设定）","zh-TW":"自动（遵循維基賬戶設定）"},"lang-zh":{"en":"中文（简繁由维基账户设定）","zh-CN":"中文（简繁由维基账户设定）","zh-TW":"中文（簡繁由維基賬戶設定）"},"lang-zh-cn":{"en":"强制简体中文子页面","zh-CN":"强制简体中文子页面","zh-TW":"强制简体中文子页面"},"lang-zh-tw":{"en":"強制台灣正體子頁面","zh-CN":"強制台灣正體子頁面","zh-TW":"強制台灣正體子頁面"},"lang-zh-hk":{"en":"強制香港繁體子頁面","zh-CN":"強制香港繁體子頁面","zh-TW":"強制香港繁體子頁面"},"lang-en":{"en":"English","zh-CN":"English","zh-TW":"English"},"lang-ja":{"en":"日本語","zh-CN":"日本語","zh-TW":"日本語"},"lang-fr":{"en":"Français","zh-CN":"Français","zh-TW":"Français"},"lang-de":{"en":"Deutschsprachige","zh-CN":"Deutschsprachige","zh-TW":"Deutschsprachige"}}}')},291:function(e){e.exports=JSON.parse('{"name":{"en":"Youdao Dictionary","zh-CN":"有道词典","zh-TW":"有道詞典"},"options":{"basic":{"en":"Show basic meaning","zh-CN":"显示简单释义","zh-TW":"顯示簡單解釋"},"collins":{"en":"Show Collins result","zh-CN":"显示柯林斯双解","zh-TW":"顯示柯林斯雙解"},"discrimination":{"en":"Show discrimination","zh-CN":"显示词语辨析","zh-TW":"顯示詞語辨析"},"sentence":{"en":"Show sentences","zh-CN":"显示权威例句","zh-TW":"顯示權威例句"},"translation":{"en":"Show translation","zh-CN":"显示有道翻译","zh-TW":"顯示有道翻譯"},"related":{"en":"Show related results","zh-CN":"失败时显示备选","zh-TW":"失敗時顯示備選"}}}')},292:function(e,t,n){"use strict";n.r(t),n.d(t,"locales",(function(){return s}));var a=n(39);const s=Object(a.a)({en:"Youdao Translate","zh-CN":"有道翻译","zh-TW":"有道翻譯"})},293:function(e){e.exports=JSON.parse('{"name":{"en":"汉典","zh-CN":"汉典","zh-TW":"漢典"},"options":{"audio":{"en":"Enable audio","zh-CN":"开启发音","zh-TW":"啟用發音"}},"helps":{"audio":{"en":"Referer modification is required, which may slightly impact performance.","zh-CN":"突破外链限制需要改写 Referer，可能会轻微影响性能。","zh-TW":"突破外鏈限制需要改寫 Referer，可能會輕微影響效能。"}}}')},294:function(e,t,n){var a={"./ankiconnect/_locales/en.ts":295,"./ankiconnect/_locales/zh-CN.ts":296,"./ankiconnect/_locales/zh-TW.ts":297,"./shanbay/_locales/en.ts":298,"./shanbay/_locales/zh-CN.ts":299,"./shanbay/_locales/zh-TW.ts":300,"./webdav/_locales/en.ts":301,"./webdav/_locales/zh-CN.ts":302,"./webdav/_locales/zh-TW.ts":303};function s(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=i,e.exports=s,s.id=294},295:function(e,t,n){"use strict";n.r(t),n.d(t,"locale",(function(){return a}));const a={title:"Anki Connect",error:{server:"Cannot connect to Anki Connect. Please make sure Anki is running.",deck:"Deck not found in Anki.",notetype:"Note type not found in Anki.",add:"Failed to add word to Anki."}}},296:function(e,t,n){"use strict";n.r(t),n.d(t,"locale",(function(){return a}));const a={title:"Anki Connect",error:{server:"无法连接 Anki Connect，请确认 Anki 已在运行。",deck:"Anki 中没有找到相应牌组。",notetype:"Anki 中没有找到相应笔记类型。",add:"添加单词到 Anki 失败。"}}},297:function(e,t,n){"use strict";n.r(t),n.d(t,"locale",(function(){return a}));const a={title:"Anki Connect",error:{server:"無法連線 Anki Connect，請確認 Anki 已在執行。",deck:"Anki 中沒有找到相應牌組。",notetype:"Anki 中沒有找到相應筆記型別。",add:"新增單詞到 Anki 失敗。"}}},298:function(e,t,n){"use strict";n.r(t),n.d(t,"locale",(function(){return a}));const a={title:"Shanbay Word Syncing",open:"Open",error:{login:"Shanbay login failed. Click to open shanbay.com.",network:"Unable to access shanbay.com. Please check your network connection.",word:"Unable to add to Shanbay notebook. This word is not in Shanbay's vocabulary database."}}},299:function(e,t,n){"use strict";n.r(t),n.d(t,"locale",(function(){return a}));const a={title:"扇贝单词同步",open:"打开",error:{login:"扇贝登录已失效，请点击打开官网重新登录。",network:"无法访问扇贝生词本，请检查网络。",word:"无法添加到扇贝生词本，扇贝单词库没有收录此单词。"}}},300:function(e,t,n){"use strict";n.r(t),n.d(t,"locale",(function(){return a}));const a={title:"扇貝單字同步",open:"開啟",error:{login:"扇貝登入已失效，請點選開啟官網重新登入。",network:"無法訪問扇貝生字本，請檢查網路。",word:"無法新增到扇貝生字本，扇貝單字庫沒有收錄此單字。"}}},301:function(e,t,n){"use strict";n.r(t),n.d(t,"locale",(function(){return a}));const a={title:"WebDAV Word Syncing",error:{dir:'Incorrect "Saladict" directory on server.',download:"Download failed. Unable to connect WebDAV Server. If browser proxy is enabled please adjust rules to bypass WebDAV server.",internal:"Unable to save settings.",missing:'Missing "Saladict" directory on server.',mkcol:'Cannot create "Saladict" directory on server. Please create the directory manualy on server.',network:"Network error. Cannot connect to server.",parse:"Incorrect response XML from server.",unauthorized:"Incorrect account or password."}}},302:function(e,t,n){"use strict";n.r(t),n.d(t,"locale",(function(){return a}));const a={title:"WebDAV 单词同步",error:{dir:"服务器上“Saladict”目录格式不正确，请检查。",download:"下载失败。无法访问 WebDAV 服务器。如启用了浏览器代理请调整规则，不要代理 WebDAV 服务器。",internal:"无法保存。",missing:"服务器上缺少“Saladict”目录。",mkcol:"无法在服务器创建“Saladict”目录。请手动在服务器上创建。",network:"连接服务器失败。",parse:"服务器返回 XML 格式不正确。",unauthorized:"账户或密码不正确。"}}},303:function(e,t,n){"use strict";n.r(t),n.d(t,"locale",(function(){return a}));const a={title:"WebDAV 單字同步",error:{dir:"伺服器上“Saladict”目錄格式不正確，請檢查。",download:"下載失敗。無法訪問 WebDAV 伺服器。如啟用了瀏覽器代理請調整規則，不要代理 WebDAV 伺服器。",internal:"無法儲存。",missing:"伺服器上缺少“Saladict”目錄。",mkcol:"無法在伺服器建立“Saladict”目錄。請手動在伺服器上建立。",network:"連線伺服器失敗。",parse:"伺服器返回 XML 格式不正確。",unauthorized:"帳戶或密碼不正確。"}}},310:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}));var a=n(1),s=n(46);async function i(){return(await a.c.local.get("titlebarOffset")).titlebarOffset}function o(e){return a.c.local.set({titlebarOffset:e})}async function r(){try{const e=await browser.windows.getCurrent();if(null==e.id)return;const t=await browser.windows.create({state:"maximized"}),n=await browser.windows.create({state:"maximized",type:"panel"});if(null==(null==t?void 0:t.id)||null==(null==n?void 0:n.id))return;await browser.windows.update(e.id,{focused:!0}),await Object(s.d)(0);const a=(await browser.windows.get(t.id)).top,i=(await browser.windows.get(n.id)).top;if(browser.windows.remove(t.id),browser.windows.remove(n.id),null==a||null==i)return;return{main:a,panel:i}}catch(e){!1}}},39:function(e,t,n){"use strict";function a(e,t={},n={}){return{name:e,options:{keepLF:{en:"Keep linebreaks","zh-CN":"保留换行","zh-TW":"保留換行"},"keepLF-none":{en:"None","zh-CN":"不保留","zh-TW":"不保留"},"keepLF-all":{en:"All","zh-CN":"全保留","zh-TW":"全保留"},"keepLF-pdf":{en:"PDF","zh-CN":"保留 PDF 换行","zh-TW":"保留 PDF 換行"},"keepLF-webpage":{en:"Webpage","zh-CN":"保留网页换行","zh-TW":"保留網頁換行"},slInitial:{en:"Source Language","zh-CN":"原文显示","zh-TW":"原文顯示"},"slInitial-hide":{en:"Hide","zh-CN":"隐藏","zh-TW":"隱藏"},"slInitial-collapse":{en:"Collapse","zh-CN":"收起","zh-TW":"收起"},"slInitial-full":{en:"Full","zh-CN":"完整显示","zh-TW":"完整顯示"},tl:{en:"Target language","zh-CN":"目标语言","zh-TW":"目標語言"},tl2:{en:"Fallback target language","zh-CN":"第二目标语言","zh-TW":"第二目標語言"},...t},helps:{slInitial:{en:"Source language initial state. If hided can be reopened via dictionary titlebar menu.","zh-CN":"原文初始显示状态。隐藏后可通过字典标题栏菜单打开。","zh-TW":"原文初始顯示狀態。隱藏後可通過字典標題欄選單開啟。"},tl2:{en:"Fallback when detected languange and target language are identical.","zh-CN":"如果检测的源语言与目标语言相同将自动切换第二目标语言。","zh-TW":"如果檢測的源語言與目標語言相同將自動切換第二目標語言。"},...n}}}n.d(t,"a",(function(){return a}))},40:function(e,t,n){"use strict";n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return g})),n.d(t,"k",(function(){return w})),n.d(t,"f",(function(){return b})),n.d(t,"m",(function(){return m})),n.d(t,"b",(function(){return y})),n.d(t,"j",(function(){return C})),n.d(t,"e",(function(){return _})),n.d(t,"l",(function(){return T})),n.d(t,"g",(function(){return z})),n.d(t,"n",(function(){return k})),n.d(t,"a",(function(){return O})),n.d(t,"d",(function(){return S})),n.d(t,"c",(function(){return N}));var a=n(85),s=n.n(a),i=n(74),o=n(178),r=n(1),c=n(95),l=n(64),d=n(76),u=n(10);function h(e){return{v:1,d:s.a.deflate(JSON.stringify(e),{to:"string"})}}function f(e){return e&&1===e.v?JSON.parse(s.a.inflate(e.d,{to:"string"})):e}function p(e,t){const n=/^%%_(\S+)_%%$/.exec(e);return n&&t("common:profile."+n[1])||e}async function g(){let e=[],t=[],n="";const a=await r.c.sync.get(["profileIDList","activeProfileID"]);if(a.profileIDList&&(t=a.profileIDList.filter(e=>Boolean(e&&"string"==typeof e.id&&"string"==typeof e.name))),a.activeProfileID&&(n=a.activeProfileID),t.length>0)for(const{id:n}of t){const t=await b(n);e.push(t?Object(o.a)(t):Object(i.b)(n))}else({profileIDList:t,profiles:e}=Object(i.a)()),n=t[0].id;n||(n=t[0].id);let s=e.find(({id:e})=>e===n);s||(s=e[0],n=s.id),await r.c.sync.set({profileIDList:t,activeProfileID:n});for(const t of e)await m(t);return s}async function w(){const{profileIDList:e}=await r.c.sync.get("profileIDList");return e&&await r.c.sync.remove([...e.map(({id:e})=>e),"profileIDList","activeProfileID","configProfileIDs","activeConfigID"]),g()}async function b(e){return f((await r.c.sync.get(e))[e])}async function m(e){return r.c.sync.set({[e.id]:h(e)})}async function y(e){const t=e.id,n=await z();return r.c.sync.set({profileIDList:[...n,e],[t]:h(Object(i.b)(t))})}async function C(e){const t=await v();let n=await z();return n=n.filter(t=>t.id!==e),t===e&&await T(n[0].id),await k(n),r.c.sync.remove(e)}async function _(){const e=await v();if(e){const t=await b(e);if(t)return t}return Object(i.b)()}async function v(){return(await r.c.sync.get("activeProfileID")).activeProfileID||""}function T(e){return r.c.sync.set({activeProfileID:e})}async function z(){return(await r.c.sync.get("profileIDList")).profileIDList||[]}function k(e){return r.c.sync.set({profileIDList:e})}function j(e){r.c.sync.addListener("profileIDList",({profileIDList:t})=>{t&&t.newValue&&e(t)})}async function O(e){let t=await v();r.c.sync.addListener(n=>{if(n.activeProfileID){const{newValue:a,oldValue:s}=n.activeProfileID;a&&(t=a,s?r.c.sync.get([s,a]).then(t=>{t[a]&&e({newProfile:f(t[a]),oldProfile:f(t[s])})}):b(a).then(t=>{t&&e({newProfile:t})}))}if(t&&n[t]){const{newValue:a,oldValue:s}=n[t];if(a)return void e({newProfile:f(a),oldProfile:f(s)})}})}function S(){return Object(c.a)(Object(l.a)(z()),Object(d.a)(j).pipe(Object(u.a)(e=>(Array.isArray(e)?e[0]:e).newValue)))}function N(){return Object(c.a)(Object(l.a)(_()),Object(d.a)(O).pipe(Object(u.a)(e=>(Array.isArray(e)?e[0]:e).newProfile)))}},432:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var a=n(24),s=n(142);async function i(e){return(await Object(s.a)()).notebook.where("text").equalsIgnoreCase(e.text).count().then(e=>e>0)}async function o({area:e,text:t}){return(await Object(s.a)())[e].where("text").equalsIgnoreCase(t).toArray()}async function r({area:e,itemsPerPage:t,pageNum:n,filters:i={},sortField:o="date",sortOrder:r="descend",searchText:c}){const l=(await Object(s.a)())[e].orderBy(o?Array.isArray(o)?o.map(e=>String(e)):String(o):"date");r&&"descend"!==r||l.reverse();const d=Array.isArray(i.text)&&i.text.length>0;if(d||c){const e=d?i.text.reduce((e,t)=>(e[t]=!0,e),{}):{},t=c?c.toLocaleLowerCase():"";l.filter(n=>{const s=!d||(e.en&&Object(a.e)(n.text)||e.ch&&Object(a.c)(n.text)||e.word&&!/\s/.test(n.text)||e.phra&&/\s/.test(n.text)),i=!c||Object.values(n).some(e=>"string"==typeof e&&-1!==e.toLocaleLowerCase().indexOf(t));return s&&i})}const u=await l.count();void 0!==t&&void 0!==n&&l.offset(t*(n-1)).limit(t);return{total:u,words:await l.toArray()}}},436:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var a=n(142);async function s({area:e,word:t}){return(await Object(a.a)())[e].put(t)}async function i({area:e,words:t}){return(await Object(a.a)())[e].bulkPut(t)}async function o({area:e,dates:t}){const n=await Object(a.a)();return Array.isArray(t)?n[e].bulkDelete(t):n[e].clear()}},442:function(e,t,n){"use strict";n.r(t),n.d(t,"locale",(function(){return a}));const a={app:{off:"Saladict disabled. (Quick Search Panel is still available)",tempOff:"Saladict disabled on current tab. (Quick Search Panel is still available)",unsupported:"Embedded Saladict panel is unsupported for current tab. Use Standalone Saladict panel instead."}}},443:function(e,t,n){"use strict";n.r(t),n.d(t,"locale",(function(){return a}));const a={app:{off:"沙拉查词已关闭（快捷查词依然可用）",tempOff:"沙拉查词已对当前标签关闭（快捷查词依然可用）",unsupported:"内嵌查词面板不支持此类页面（独立窗口查词面板依然可用）"}}},444:function(e,t,n){"use strict";n.r(t),n.d(t,"locale",(function(){return a}));const a={app:{off:"沙拉查詞已關閉（快捷查詞依然可用）",tempOff:"沙拉查詞已對當前標籤關閉（快捷查詞依然可用）",unsupported:"內嵌查字介面不支援此類頁面（獨立視窗查字介面依然可用）"}}},46:function(e,t,n){"use strict";function a(e){const t=Array.isArray(e)?e:Array.from(e);return Promise.all(t.map(e=>Promise.resolve(e).catch(()=>null)))}function s(e){const t=Array.isArray(e)?e:Array.from(e);let n=0;return new Promise((e,a)=>t.forEach(s=>{Promise.resolve(s).then(e).catch(()=>{++n===t.length&&a(new Error("All rejected"))})}))}function i(...e){return new Promise(t=>{setTimeout(()=>e.length>1?t(e[1]):t(),Number(e[0])||0)})}function o(e,t=0){return Promise.race([e,i(t).then(()=>Promise.reject(new Error(`timeout ${t}ms`)))])}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o}))},505:function(e,t,n){"use strict";n.r(t),n.d(t,"Service",(function(){return o}));var a=n(250),s=n(107),i=n(1);class o extends a.a{constructor(...e){super(...e),this.meta={},this.handleSyncAlarm=async e=>{if("webdav"!==e.name)return;try{await this.download({})}catch(e){console.error(e),Object(s.c)(o.id,"download")}const t=6e4*this.config.duration||9e5;await i.c.local.set({webdavInterval:Date.now()+t})}}static getDefaultConfig(){return{enable:!1,url:"",user:"",passwd:"",duration:15}}async onStart(){if(this.config.enable)if(this.meta=await Object(s.a)(o.id)||this.meta,await browser.alarms.clear("webdav"),browser.alarms.onAlarm.addListener(this.handleSyncAlarm),"string"!=typeof this.config.url||this.config.url.endsWith("/")||(this.config.url+="/"),this.config.url){const e=+this.config.duration||15,t=Date.now();let n=+(await i.c.local.get("webdavInterval")).webdavInterval;(!n||n<t||t+6e4*e<n)&&(n=t+1e3),await i.c.local.set({webdavInterval:n}),browser.alarms.create("webdav",{when:n,periodInMinutes:e})}else await i.c.local.set({webdavInterval:0})}async checkDir(){let e,t="";try{const e=await fetch(this.config.url,{method:"PROPFIND",headers:{Authorization:"Basic "+window.btoa(`${this.config.user}:${this.config.passwd}`),"Content-Type":'application/xml; charset="utf-8"',Depth:"1"}});if(!e.ok){if(401===e.status)throw new Error("unauthorized");throw new Error("Network error: "+e.status)}t=await e.text()}catch(e){throw new Error("network")}try{t&&(e=(new DOMParser).parseFromString(t,"text/xml"))}catch(e){throw new Error("parse")}if(!e)throw new Error("parse");const n=Array.from(e.querySelectorAll("response"));for(const e in n){const t=n[e].querySelector("href");if(t&&t.textContent&&t.textContent.endsWith("/Saladict/")){if(n[e].querySelector("resourcetype collection"))return!0;throw new Error("dir")}}return!1}async init(){const e=await this.checkDir();if(!e){if(!(await fetch(this.config.url+"Saladict",{method:"MKCOL",headers:{Authorization:"Basic "+window.btoa(`${this.config.user}:${this.config.passwd}`)}})).ok)throw new Error("mkcol")}if(e){try{await this.download({testConfig:this.config,noCache:!0})}catch(e){return}throw new Error("exist")}}async add({force:e}){if(!this.config.url)return void 0;e||await this.download({});const t=await Object(s.b)();if(!t||t.length<=0)return;const n=Date.now();try{var a=JSON.stringify({timestamp:n,words:t})}catch(e){throw new Error("parse")}try{if(!(await fetch(this.config.url+"Saladict/notebook.json",{method:"PUT",headers:{Authorization:"Basic "+window.btoa(`${this.config.user}:${this.config.passwd}`)},body:a})).ok)throw new Error("network")}catch(e){throw new Error("network")}await this.setMeta({timestamp:n,etag:""})}delete({force:e}){return this.add({force:e})}async download({testConfig:e,noCache:t}){const n=e||this.config;if(!n.url)return void 0;const a={Authorization:"Basic "+window.btoa(`${n.user}:${n.passwd}`)};e||t||null==this.meta.etag||(a["If-None-Match"]=this.meta.etag,a["If-Modified-Since"]=this.meta.etag);try{var i=await fetch(n.url+(n.url.endsWith("/")?"":"/")+"Saladict/notebook.json",{method:"GET",headers:a});if(304===i.status)return;if(!i.ok)throw new Error}catch(e){throw new Error("network")}try{var o=await i.json()}catch(e){throw new Error("parse")}if(!Array.isArray(o.words)||o.words.some(e=>!e.date))throw new Error("format");if(!o.timestamp)throw new Error("timestamp");if(e)return;const r=this.meta;(!r.timestamp||o.timestamp>=r.timestamp)&&await this.setMeta({timestamp:o.timestamp,etag:i.headers.get("ETag")||r.etag||""}),!t&&r.timestamp&&o.timestamp<=r.timestamp||await Object(s.f)(o.words)}async destroy(){browser.alarms.onAlarm.removeListener(this.handleSyncAlarm),await browser.alarms.clear("webdav")}setMeta(e){return this.meta=e,Object(s.e)(o.id,e)}async getMeta(){const e=await Object(s.a)(o.id);this.meta=e||{}}}o.id="webdav"},535:function(e,t,n){"use strict";n.r(t),n.d(t,"Service",(function(){return l}));var a=n(131),s=n.n(a),i=n(80),o=n(250),r=n(107),c=n(1);class l extends o.a{constructor(...e){super(...e),this.noteFileds=void 0,this.handleMessage=e=>{switch(e.type){case"ANKI_CONNECT_FIND_WORD":return this.findNote(e.payload).catch(()=>"");case"ANKI_CONNECT_UPDATE_WORD":return this.updateWord(e.payload.cardId,e.payload.word).catch(e=>Promise.reject(e))}},this._div=void 0}static getDefaultConfig(){return{enable:!1,host:"127.0.0.1",port:"8765",key:null,deckName:"Saladict",noteType:"Saladict Word",tags:"",escapeContext:!0,escapeTrans:!0,escapeNote:!0,syncServer:!1}}async init(){if(!await this.isServerUp())throw new Error("server");const e=await this.request("deckNames");if(!(null==e?void 0:e.includes(this.config.deckName)))throw new Error("deck");const t=await this.request("modelNames");if(!(null==t?void 0:t.includes(this.config.noteType)))throw new Error("notetype")}onStart(){c.a.addListener(this.handleMessage)}async destroy(){c.a.removeListener(this.handleMessage)}async findNote(e){this.noteFileds||(this.noteFileds=await this.getNotefields());try{return(await this.request("findNotes",{query:`deck:${this.config.deckName} ${this.noteFileds[0]}:${e}`}))[0]}catch(e){!1}}async add({words:e,force:t}){if(!await this.isServerUp())throw new Error("server");if(t&&(e=await Object(r.b)()),e&&!(e.length<=0)&&(await Promise.all(e.map(async e=>{if(!await this.findNote(e.date))try{await this.addWord(e)}catch(e){throw new Error("add")}})),this.config.syncServer))try{await this.request("sync")}catch(e){!1}}async addWord(e){return this.request("addNote",{note:{deckName:this.config.deckName,modelName:this.config.noteType,options:{allowDuplicate:!1,duplicateScope:"deck"},tags:this.extractTags(),fields:await this.wordToFields(e)}})}async updateWord(e,t){return this.request("updateNoteFields",{note:{id:e,fields:await this.wordToFields(t)}})}async addDeck(){return this.request("createDeck",{deck:this.config.deckName})}async addNoteType(){this.noteFileds=["Date","Text","Translation","Context","ContextCloze","Note","Title","Url","Favicon","Audio"],await this.request("createModel",{modelName:this.config.noteType,inOrderFields:this.noteFileds,css:".card {\n  font-family: arial;\n  font-size: 20px;\n  text-align: center;\n  color: #333;\n  background-color: white;\n}\n\na {\n  color: #5caf9e;\n}\n\ninput {\n  border: 1px solid #eee;\n}\n\nsection {\n  margin: 1em 0;\n}\n\n.trans {\n  border: 1px solid #eee;\n  padding: 0.5em;\n}\n\n.trans_title {\n  display: block;\n  font-size: 0.9em;\n  font-weight: bold;\n}\n\n.trans_content {\n  margin-bottom: 0.5em;\n}\n\n.cloze {\n  font-weight: bold;\n  color: #f9690e;\n}\n\n.tsource {\n  position: relative;\n  font-size: .8em;\n}\n\n.tsource img {\n  height: .7em;\n}\n\n.tsource a {\n  text-decoration: none;\n}\n\n.typeGood {\n  color: #fff;\n  background: #1EBC61;\n}\n\n.typeBad {\n  color: #fff;\n  background: #F75C4C;\n}\n\n.typeMissed {\n  color: #fff;\n  background: #7C8A99;\n}\n",cardTemplates:[{Name:"Saladict Cloze",Front:d(!0,this.noteFileds),Back:d(!1,this.noteFileds)}]}),this.noteFileds=await this.getNotefields(),await this.request("updateModelTemplates",{model:{name:this.config.noteType,templates:{"Saladict Cloze":{Front:d(!0,this.noteFileds),Back:d(!1,this.noteFileds)}}}})}async request(e,t){const{data:n}=await s()({method:"post",url:`http://${this.config.host}:${this.config.port}`,data:{key:this.config.key||null,version:6,action:e,params:t||{}}});if(!n||!Object.prototype.hasOwnProperty.call(n,"result"))throw new Error("Deprecated Anki Connect version");if(n.error)throw new Error(n.error);return n.result}async wordToFields(e){return this.noteFileds||(this.noteFileds=await this.getNotefields()),{[this.noteFileds[0]]:""+e.date,[this.noteFileds[1]]:e.text||"",[this.noteFileds[2]]:this.parseTrans(e.trans,this.config.escapeTrans),[this.noteFileds[3]]:this.multiline(e.context,this.config.escapeContext),[this.noteFileds[4]]:this.multiline(e.context.split(e.text).join(`{{c1::${e.text}}}`),this.config.escapeContext)||`{{c1::${e.text}}}`,[this.noteFileds[5]]:this.multiline(e.note,this.config.escapeNote),[this.noteFileds[6]]:e.title||"",[this.noteFileds[7]]:e.url||"",[this.noteFileds[8]]:e.favicon||"",[this.noteFileds[9]]:""}}async getNotefields(){const e=await this.request("modelFieldNames",{modelName:this.config.noteType});return(null==e?void 0:e.includes("Date."))?["Date.","Text.","Translation.","Context.","ContextCloze.","Note.","Title.","Url.","Favicon.","Audio."]:(null==e?void 0:e.includes("日期"))?["日期","文字","Translation","Context","ContextCloze","笔记","Title","Url","Favicon","Audio"]:["Date","Text","Translation","Context","ContextCloze","Note","Title","Url","Favicon","Audio"]}multiline(e,t){return(e=e.trim())?(t&&(e=this.escapeHTML(e)),e.trim().replace(/\n/g,"<br/>")):""}parseTrans(e,t){if(!(e=e.trim()))return"";const n=Object(i.b)(e),a=Object.keys(n);if(a.length<=0)return this.multiline(e,t);const s=a.map(e=>`<span class="trans_title">${e}</span><div class="trans_content">${n[e]}</div>`).join("");return e.split(/\[:: \w+ ::\](?:[\s\S]+?)(?:-{15})/).map(e=>this.multiline(e,t)).join(`<div class="trans">${s}</div>`)}escapeHTML(e){return this._div||(this._div=document.createElement("div"),this._div.appendChild(document.createTextNode(""))),this._div.firstChild.nodeValue=e,this._div.innerHTML}extractTags(){return this.config.tags.split(/,|，/).map(e=>e.trim()).filter(Boolean)}async isServerUp(){try{return null!=await this.request("version")}catch(e){return!1}}}function d(e,t){return`{{#${t[4]}}}\n<section>{{cloze:${t[4]}}}</section>\n<section>{{{{type:cloze:${t[4]}}}</section>\n{{#${t[2]}}}\n<section>{{${t[2]}}}</section>\n{{/${t[2]}}}\n{{/${t[4]}}}\n\n{{^${t[4]}}}\n<h1>{{${t[1]}}}</h1>\n{{#${t[2]}}}\n<section>{{${t[2]}}}</section>\n{{/${t[2]}}}\n{{/${t[4]}}}\n\n{{#${t[5]}}}\n<section>{{${(e?"hint:":"")+t[5]}}}</section>\n{{/${t[5]}}}\n\n{{#${t[6]}}}\n<section class="tsource">\n<hr />\n{{#${t[8]}}}<img src="{{${t[8]}}}" />{{/${t[8]}}}\n<a href="{{${t[7]}}}">{{${t[6]}}}</a>\n</section>\n{{/${t[6]}}}\n`}l.id="ankiconnect"},536:function(e,t,n){"use strict";n.r(t),n.d(t,"Service",(function(){return l}));var a=n(250),s=n(107),i=n(1),o=n(46),r=n(2),c=n(251);class l extends a.a{static getDefaultConfig(){return{enable:!1}}static openLogin(){return Object(i.b)("https://www.shanbay.com/web/account/login")}async init(){if(!await this.isLogin())throw new Error("login")}async add(e){await this.addInternal(e)}async addInternal({words:e,force:t}){if(!this.config.enable)return 0;if(!await this.isLogin())return this.notifyLogin(),0;if(t&&(e=await Object(s.b)()),!e||e.length<=0)return 0;let n=0;for(let t=0;t<e.length;t++){try{await this.addWord(e[t].text)}catch(a){if("word"!==a.message)throw a;n+=1,Object(s.c)(l.id,"word",`「${e[t].text}」`)}(t+1)%50==0?await Object(o.d)(9e5):await Object(o.d)(500)}return n}async addWord(e){let t,n;try{const n="https://apiv3.shanbay.com/abc/words/senses?vocabulary_content="+encodeURIComponent(e);t=await fetch(n).then(e=>e.json())}catch(e){throw new Error("network")}if(!t||!t.id)throw new Error("word");try{n=await fetch("https://apiv3.shanbay.com/wordscollection/words",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vocab_id:t.id,business_id:6})}).then(e=>e.json())}catch(e){throw new Error("network")}if(!n||!n.created_at)throw new Error("word")}async isLogin(){return Boolean(await browser.cookies.get({url:"http://www.shanbay.com",name:"auth_token"}))}async notifyLogin(){const{i18n:e}=await c.a.getInstance();await e.loadNamespaces("sync"),browser.notifications.onClicked.addListener(d),browser.notifications.onClosed.removeListener(u),browser.notifications.onButtonClicked&&browser.notifications.onButtonClicked.addListener(d);const t={type:"basic",iconUrl:browser.runtime.getURL("assets/icon-128.png"),title:"Saladict "+e.t("sync:shanbay.title"),message:e.t("sync:shanbay.error.login"),eventTime:Date.now()+1e4,priority:2};r.c||(t.buttons=[{title:e.t("sync:shanbay.open")}]),browser.notifications.create("shanbay-login",t)}}function d(e){"shanbay-login"===e&&(l.openLogin(),u(e))}function u(e){"shanbay-login"===e&&(browser.notifications.onClicked.removeListener(d),browser.notifications.onClosed.removeListener(u),browser.notifications.onButtonClicked&&browser.notifications.onButtonClicked.removeListener(d))}l.id="shanbay"},717:function(e,t){},74:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}));var a=n(113),s=n(81);const i=function(e){return{version:1,id:e||Object(a.a)(),mtaAutoUnfold:"",waveform:!0,stickyFold:!1,dicts:{selected:["bing","cobuild","cambridge","youdao","urban","vocabulary","google","zdic","guoyu","liangan","googledict"],all:Object(s.b)()}}};function o(e){return{id:e||Object(a.a)(),name:"%%_default_%%"}}function r(){const e=o(),t=i(e.id),n=function(){const e=o();e.name="%%_sentence_%%";const t=i(e.id);t.dicts.selected=["jukuu","bing","cnki","renren","eudic","cobuild","cambridge","longman","macmillan"];const n=t.dicts.all;return n.bing.options.tense=!1,n.bing.options.phsym=!1,n.bing.options.cdef=!1,n.bing.options.related=!1,n.bing.options.sentence=9999,n.cnki.options.dict=!1,n.eudic.options.resultnum=9999,n.macmillan.options.related=!1,n.longman.options.wordfams=!1,n.longman.options.collocations=!1,n.longman.options.grammar=!1,n.longman.options.thesaurus=!1,n.longman.options.examples=!0,n.longman.options.bussinessFirst=!1,n.longman.options.related=!1,{idItem:e,profile:t}}(),a=function(){const e=o();e.name="%%_translation_%%";const t=i(e.id);return t.dicts.selected=["google","tencent","baidu","caiyun","youdaotrans","zdic","guoyu","liangan"],t.mtaAutoUnfold="always",{idItem:e,profile:t}}(),s=function(){const e=o();e.name="%%_scholar_%%";const t=i(e.id);t.dicts.selected=["googledict","cambridge","cobuild","etymonline","cnki","macmillan","lexico","websterlearner","google","youdaotrans","zdic","guoyu","liangan"];const n=t.dicts.all;return n.macmillan.defaultUnfold={matchAll:!1,english:!1,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1},n.lexico.defaultUnfold={matchAll:!1,english:!1,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1},n.websterlearner.defaultUnfold={matchAll:!1,english:!1,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1},n.google.selectionWC.min=5,n.youdaotrans.selectionWC.min=5,{idItem:e,profile:t}}(),r=function(){const e=o();e.name="%%_nihongo_%%";const t=i(e.id);return t.dicts.selected=["mojidict","hjdict","weblioejje","weblio","google","tencent","caiyun","googledict","wikipedia"],t.dicts.all.wikipedia.options.lang="ja",t.waveform=!1,{idItem:e,profile:t}}();return{profileIDList:[e,n.idItem,a.idItem,s.idItem,r.idItem],profiles:[t,n.profile,a.profile,s.profile,r.profile]}}},78:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(165),s=n(166),i=n(167),o=n(168),r=n(169);const c={baidu:a.auth,caiyun:s.auth,sogou:i.auth,tencent:o.auth,youdaotrans:r.auth};var l=n(2);const d=browser.i18n.getUILanguage(),u="zh-CN"===d?"zh-CN":"zh-TW"===d||"zh-HK"===d?"zh-TW":"en",h=function(){return{version:14,active:!0,runInBg:!1,analytics:!0,updateCheck:!0,noTypeField:!1,animation:!0,langCode:u,panelWidth:450,panelMaxHeightRatio:80,bowlOffsetX:15,bowlOffsetY:-45,darkMode:!1,panelCSS:"",fontSize:13,pdfSniff:!1,pdfStandalone:"",pdfWhitelist:[],pdfBlacklist:[["^(http|https)://[^/]*?cnki\\.net(/.*)?$","*://*.cnki.net/*"],["^(http|https)://[^/]*?googleusercontent\\.com(/.*)?$","*://*.googleusercontent.com/*"],["^(http|https)://sh-download\\.weiyun\\.com(/.*)?$","*://sh-download.weiyun.com/*"]],searchHistory:!1,searchHistoryInco:!1,editOnFav:!0,searchSuggests:!0,touchMode:!1,mode:{icon:!0,direct:!1,double:!1,holding:{alt:!1,shift:!1,ctrl:!1,meta:!1},instant:{enable:!1,key:"alt",delay:600}},pinMode:{direct:!0,double:!1,holding:{alt:!1,shift:!1,ctrl:!1,meta:!1},instant:{enable:!1,key:"alt",delay:600}},panelMode:{direct:!1,double:!1,holding:{alt:!1,shift:!1,ctrl:!1,meta:!1},instant:{enable:!1,key:"alt",delay:600}},qsPanelMode:{direct:!0,double:!1,holding:{alt:!1,shift:!1,ctrl:!0,meta:!1},instant:{enable:!1,key:"alt",delay:600}},bowlHover:!0,doubleClickDelay:450,tripleCtrl:!0,qsPreload:"clipboard",qsAuto:!0,qsLocation:"CENTER",qsFocus:!0,defaultPinned:!1,qsStandalone:!0,qssaHeight:600,qssaSidebar:"",qssaPageSel:!0,qssaRectMemo:!1,baWidth:-1,baHeight:550,baPreload:"selection",baAuto:!1,baOpen:"popup_panel",ctxTrans:{google:!0,youdaotrans:!0,baidu:!0,tencent:!1,caiyun:!1,sogou:!1},language:{chinese:!0,english:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!1,matchAll:!1},autopron:{cn:{dict:"",list:["zdic","guoyu"]},en:{dict:"",list:["bing","cambridge","cobuild","eudic","longman","macmillan","lexico","urban","websterlearner","youdao"],accent:"uk"},machine:{dict:"",list:["google","sogou","tencent","baidu","caiyun"],src:"trans"}},whitelist:[],blacklist:[["^https://stackedit\\.io(/.*)?$","https://stackedit.io/*"],["^https://docs\\.google\\.com(/.*)?$","https://docs.google.com/*"],["^https://docs\\.qq\\.com(/.*)?$","https://docs.qq.com/*"]],contextMenus:{selected:l.c||!u.startsWith("zh-")?["view_as_pdf","google_translate","saladict"]:["view_as_pdf","caiyuntrs","google_translate","saladict"],all:{baidu_page_translate:"x",baidu_search:"https://www.baidu.com/s?ie=utf-8&wd=%s",bing_dict:"https://cn.bing.com/dict/?q=%s",bing_search:"https://www.bing.com/search?q=%s",caiyuntrs:"x",cambridge:"http://dictionary.cambridge.org/spellcheck/english-chinese-simplified/?q=%s",copy_pdf_url:"x",dictcn:"https://dict.eudic.net/dicts/en/%s",etymonline:"http://www.etymonline.com/index.php?search=%s",google_cn_page_translate:"x",google_page_translate:"x",google_search:"https://www.google.com/#newwindow=1&q=%s",google_translate:"https://translate.google.com/#auto/zh-CN/%s",google_cn_translate:"https://translate.google.cn/#auto/zh-CN/%s",guoyu:"https://www.moedict.tw/%s",iciba:"http://www.iciba.com/%s",liangan:"https://www.moedict.tw/~%s",longman_business:"http://www.ldoceonline.com/search/?q=%s",merriam_webster:"http://www.merriam-webster.com/dictionary/%s",microsoft_page_translate:"x",oxford:"http://www.oxforddictionaries.com/us/definition/english/%s",saladict:"x",saladict_standalone:"x",sogou_page_translate:"x",sogou:"https://fanyi.sogou.com/#auto/zh-CHS/%s",termonline:"https://www.termonline.cn/list.htm?k=%s",view_as_pdf:"x",youdao_page_translate:"x",youdao:"http://dict.youdao.com/w/%s",youglish:"https://youglish.com/search/%s"}},showedDictAuth:!1,dictAuth:JSON.parse(JSON.stringify(c))}}},789:function(e,t,n){var a={"./en/background":442,"./zh-CN/background":443,"./zh-TW/background":444};function s(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=i,e.exports=s,s.id=789},80:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));var a=n(1),s=n(2);async function i(e,t){try{const n=await a.a.send({type:"FETCH_DICT_RESULT",payload:{id:t,text:e,payload:{isPDF:Object(s.i)()}}});return n&&n.result&&n.result.trans&&n.result.trans.paragraphs.join("\n")||""}catch(e){return""}}async function o(e,t){return(await Promise.all(Object.keys(t).map(async n=>{let a="";if(t[n])try{a=await i(e,n)}catch(e){console.warn(e)}return{id:n,content:a}}))).reduce((e,{id:t,content:n})=>(e[t]=n,e),{})}function r(e){const t=/\[:: (\w+) ::\]\n([\s\S]+?)(?=(?:\[:: \w+ ::\])|(?:-{15}))/g;let n;const a={};for(;null!==(n=t.exec(e));)a[n[1]]=n[2].replace(/\n+$/g,"");return a}function c(e,t){const n=Object.keys(t).filter(e=>t[e]);if(n.length<=0)return e;const a=n.map(e=>`[:: ${e} ::]\n`+t[e]).join("\n\n")+`\n${"".padEnd(15,"-")}\n`;if(!e)return a;const s=/\[:: (\w+) ::\]\n([\s\S]+?)-{15}/;return s.test(e)?e.replace(s,a):e+"\n\n"+a}},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));var a=n(17);const s={baidu:Object(a.b)(["zh-CN","zh-TW","en","ja","ko","fr","de","es","ru","nl"],{},{},{}),bing:{lang:"11000000",selectionLang:{english:!0,chinese:!0,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:240,selectionWC:{min:1,max:5},options:{tense:!0,phsym:!0,cdef:!0,related:!0,sentence:4}},caiyun:Object(a.b)(["zh-CN","en","ja"],{lang:"11010000"},{},{}),cambridge:{lang:"11100000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5},options:{lang:"default",related:!0},options_sel:{lang:["default","en","en-chs","en-chz"]}},cnki:{lang:"11000000",selectionLang:{english:!0,chinese:!0,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:300,selectionWC:{min:1,max:100},options:{dict:!0,senbi:!0,seneng:!0}},cobuild:{lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:300,selectionWC:{min:1,max:5},options:{cibaFirst:(browser.i18n.getUILanguage()||"en").startsWith("zh-")}},etymonline:{lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5},options:{resultnum:4,chart:!0}},eudic:{lang:"11000000",selectionLang:{english:!0,chinese:!0,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:240,selectionWC:{min:1,max:5},options:{resultnum:10}},google:Object(a.b)(["zh-CN","zh-TW","en","ja","ko","fr","de","es","ru","nl"],{},{cnfirst:!0,concurrent:!1},{}),googledict:{lang:"11110000",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:240,selectionWC:{min:1,max:5},options:{enresult:!0}},guoyu:{lang:"00100000",selectionLang:{english:!1,chinese:!0,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5},options:{trans:!0}},hjdict:{lang:"10011111",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:10},options:{related:!0,chsas:"jp/jc",engas:"w",uas:"fr",aas:"fr",eas:"fr"},options_sel:{chsas:["jp/cj","jp/jc","kr","w","fr","de","es"],engas:["w","fr","de","es"],uas:["fr","de","es"],aas:["fr","de"],eas:["fr","es"]}},jikipedia:{lang:"01000000",selectionLang:{english:!0,chinese:!0,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!0,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:380,selectionWC:{min:1,max:5},options:{resultnum:4}},jukuu:{lang:"11010000",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:300,selectionWC:{min:1,max:99999},options:{lang:"zheng"},options_sel:{lang:["zheng","engjp","zhjp"]}},lexico:{lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5},options:{related:!0}},liangan:{lang:"00100000",selectionLang:{english:!1,chinese:!0,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5},options:{trans:!1}},longman:{lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5},options:{wordfams:!1,collocations:!0,grammar:!0,thesaurus:!0,examples:!0,bussinessFirst:!0,related:!0}},macmillan:{lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:465,selectionWC:{min:1,max:5},options:{related:!0,locale:"uk"},options_sel:{locale:["uk","us"]}},mojidict:{lang:"10010000",selectionLang:{english:!1,chinese:!0,japanese:!0,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5}},naver:{lang:"01011000",selectionLang:{english:!1,chinese:!0,japanese:!0,korean:!0,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:465,selectionWC:{min:1,max:10},options:{hanAsJa:!1,korAsJa:!1}},renren:{lang:"11000000",selectionLang:{english:!0,chinese:!0,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:400,selectionWC:{min:1,max:999}},sogou:Object(a.b)(["zh-CN","zh-TW","en","ja","ko","fr","de","es","ru"],{},{},{}),tencent:Object(a.b)(["zh-CN","en","ja","ko","fr","de","es","ru"],{lang:"11011111"},{},{}),urban:{lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:180,selectionWC:{min:1,max:5},options:{resultnum:4}},vocabulary:{lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:180,selectionWC:{min:1,max:5}},weblio:{lang:"00010000",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:20}},weblioejje:{lang:"10010000",selectionLang:{english:!0,chinese:!1,japanese:!0,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:400,selectionWC:{min:1,max:999}},websterlearner:{lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5},options:{defs:!0,phrase:!0,derived:!0,arts:!0,related:!0}},wikipedia:{lang:"11110000",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:420,selectionWC:{min:1,max:999999999999999},options:{lang:"auto"},options_sel:{lang:["auto","zh","zh-cn","zh-tw","zh-hk","en","ja","fr","de"]}},youdao:{lang:"11000000",selectionLang:{english:!0,chinese:!0,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:999999999999999},options:{basic:!0,collins:!0,discrimination:!0,sentence:!0,translation:!1,related:!0}},youdaotrans:Object(a.b)(["zh-CN","en","pt","es","ja","ko","fr","ru"],{lang:"11011111"},{},{}),zdic:{lang:"01000000",selectionLang:{english:!1,chinese:!0,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:400,selectionWC:{min:1,max:5},options:{audio:!1}}},i=()=>JSON.parse(JSON.stringify(s))},87:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return g})),n.d(t,"e",(function(){return w})),n.d(t,"d",(function(){return b}));var a=n(38),s=n(10),i=n(108),o=n(180),r=n(371),c=n(145),l=n(499),d=n(83),u=n(96),h=n(64);function f(e){return e.pipe(Object(a.a)(e=>!(e.relatedTarget===e.currentTarget||e.relatedTarget instanceof Node&&e.currentTarget.contains(e.relatedTarget))),Object(s.a)(e=>"mouseover"===e.type))}function p(e){return f(e).pipe(Object(i.a)(e=>Object(u.a)(e).pipe(Object(o.a)(e?500:100))))}function g(e){return e.pipe(Object(s.a)(e=>"blur"!==e.type),Object(r.a)(100))}function w(e,t){return n=>n.pipe(Object(c.a)(s=>Object(h.a)(t(s)).pipe(Object(l.a)(n.pipe(Object(a.a)(t=>t[e]===s[e]))))))}function b(e){return Object(d.a)(!0)(e)}},9:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return g})),n.d(t,"c",(function(){return w}));var a=n(0),s=n.n(a),i=n(134),o=n.n(i),r=n(12),c=n(29),l=n(217),d=n.n(l);async function u(){if(r.a.language)return r.a;const{langCode:e}=await Object(c.c)();return await r.a.use({type:"backend",init:()=>{},create:()=>{},read:async(e,t,a)=>{try{if("dicts"===t){const t=function(e){const t=n(260);return t.keys().reduce((n,a)=>{const s=t(a),i=s.locales||s,r=/([^/]+)\/_locales\.(json|ts)$/.exec(a)[1];return n[r]={name:i.name[e]},i.options&&(n[r].options=o()(i.options,t=>t[e])),i.helps&&(n[r].helps=o()(i.helps,t=>t[e])),n},{})}(e);return a(null,t),t}if("sync"===t){const t=function(e){const t=n(294);return t.keys().reduce((n,a)=>{const s=new RegExp(`/([^/]+)/_locales/${e}\\.ts$`).exec(a);if(s){const e=t(a);n[s[1]]=e.locale||e}return n},{})}(e);return a(null,t),t}const{locale:s}=await n(259)(`./${e}/${t}.ts`);return a(null,s),s}catch(e){a(e)}}}).init({lng:e,fallbackLng:!1,whitelist:["en","zh-CN","zh-TW"],debug:!1,saveMissing:!1,load:"currentOnly",ns:"common",defaultNS:"common",interpolation:{escapeValue:!1}}),Object(c.a)(({newConfig:e})=>{r.a.language!==e.langCode&&r.a.changeLanguage(e.langCode)}),r.a}const h=()=>"",f=s.a.createContext(void 0);const p=({children:e})=>{const[t,n]=Object(a.useState)(void 0);return Object(a.useLayoutEffect)(()=>{const e=()=>{n(r.a.language)};return r.a.language||u().then(()=>{n(r.a.language),r.a.on("languageChanged",e)}),()=>{r.a.off("languageChanged",e)}},[]),s.a.createElement(f.Provider,{value:t},e)};function g(e){const t=Object(a.useRef)(0),n=Object(a.useRef)(h),s=Object(a.useRef)((...e)=>n.current(...e)),i=Object(a.useContext)(f),o=(e,a)=>{e&&(n.current=e),a&&(t.current=(t.current+1)%1e5);return{t:s.current,i18n:r.a,ready:!!a&&t.current}},[c,l]=Object(a.useState)(()=>i?e?(Array.isArray(e)?e.every(e=>r.a.hasResourceBundle(i,e)):r.a.hasResourceBundle(i,e))?o(r.a.getFixedT(i,e),!0):o(h,!1):o(r.a.t,!0):o(h,!1));return Object(a.useLayoutEffect)(()=>{let t=!0;return i&&(e?(Array.isArray(e)?e.every(e=>r.a.hasResourceBundle(i,e)):r.a.hasResourceBundle(i,e))?l(o(r.a.getFixedT(i,e),!0)):(l(o(null,!1)),r.a.loadNamespaces(e).then(()=>{t&&l(o(r.a.getFixedT(i,e),!0))})):l(o(r.a.t,!0))),()=>{t=!1}},[i]),c}const w=s.a.memo(({message:e,children:t})=>e?s.a.createElement(a.Fragment,null,d()(e.split(/{[^}]*?}/),Array.isArray(t)?t:[t])):null)}},[[1207,0,1,4,20]]]);