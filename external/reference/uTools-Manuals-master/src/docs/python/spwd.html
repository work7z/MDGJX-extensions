<div class="body" role="main"><div class="section" id="module-spwd"><h1><span class="yiyi-st" id="yiyi-10">35.3. <a class="reference internal" href="#module-spwd" title="spwd: The shadow password database (getspnam() and friends). (Unix)"><code class="xref py py-mod docutils literal"><span class="pre">spwd</span></code></a>  - 影子密码数据库</span></h1><p><span class="yiyi-st" id="yiyi-11">此模块提供对Unix影子密码数据库的访问。</span><span class="yiyi-st" id="yiyi-12">它可用于各种Unix版本。</span></p><p><span class="yiyi-st" id="yiyi-13">您必须具有足够的权限才能访问影子密码数据库（这通常意味着您必须是root用户）。</span></p><p><span class="yiyi-st" id="yiyi-14">影子密码数据库条目报告为类似元组的对象，其属性对应于<code class="docutils literal"><span class="pre">spwd</span></code>结构的成员（下面的属性字段，参见<code class="docutils literal"><span class="pre">&lt;shadow.h&gt;</span></code>） ：</span></p><table border="1" class="docutils"><thead valign="bottom"><tr class="row-odd"><th class="head"><span class="yiyi-st" id="yiyi-15">指数</span></th><th class="head"><span class="yiyi-st" id="yiyi-16">属性</span></th><th class="head"><span class="yiyi-st" id="yiyi-17">含义</span></th></tr></thead><tbody valign="top"><tr class="row-even"><td><span class="yiyi-st" id="yiyi-18">0</span></td><td><span class="yiyi-st" id="yiyi-19"><code class="docutils literal"><span class="pre">sp_namp</span></code></span></td><td><span class="yiyi-st" id="yiyi-20">登录名</span></td></tr><tr class="row-odd"><td><span class="yiyi-st" id="yiyi-21">1</span></td><td><span class="yiyi-st" id="yiyi-22"><code class="docutils literal"><span class="pre">sp_pwdp</span></code></span></td><td><span class="yiyi-st" id="yiyi-23">加密密码</span></td></tr><tr class="row-even"><td><span class="yiyi-st" id="yiyi-24">2</span></td><td><span class="yiyi-st" id="yiyi-25"><code class="docutils literal"><span class="pre">sp_lstchg</span></code></span></td><td><span class="yiyi-st" id="yiyi-26">上次更改日期</span></td></tr><tr class="row-odd"><td><span class="yiyi-st" id="yiyi-27">3</span></td><td><span class="yiyi-st" id="yiyi-28"><code class="docutils literal"><span class="pre">sp_min</span></code></span></td><td><span class="yiyi-st" id="yiyi-29">更改之间的最小天数</span></td></tr><tr class="row-even"><td><span class="yiyi-st" id="yiyi-30">4</span></td><td><span class="yiyi-st" id="yiyi-31"><code class="docutils literal"><span class="pre">sp_max</span></code></span></td><td><span class="yiyi-st" id="yiyi-32">更改之间的最大天数</span></td></tr><tr class="row-odd"><td><span class="yiyi-st" id="yiyi-33">5</span></td><td><span class="yiyi-st" id="yiyi-34"><code class="docutils literal"><span class="pre">sp_warn</span></code></span></td><td><span class="yiyi-st" id="yiyi-35">密码过期前向用户发出警告的天数</span></td></tr><tr class="row-even"><td><span class="yiyi-st" id="yiyi-36">6</span></td><td><span class="yiyi-st" id="yiyi-37"><code class="docutils literal"><span class="pre">sp_inact</span></code></span></td><td><span class="yiyi-st" id="yiyi-38">密码到期后的天数，直到帐户被停用</span></td></tr><tr class="row-odd"><td><span class="yiyi-st" id="yiyi-39">7</span></td><td><span class="yiyi-st" id="yiyi-40"><code class="docutils literal"><span class="pre">sp_expire</span></code></span></td><td><span class="yiyi-st" id="yiyi-41">帐户到期后从1970-01-01开始的天数</span></td></tr><tr class="row-even"><td><span class="yiyi-st" id="yiyi-42">8</span></td><td><span class="yiyi-st" id="yiyi-43"><code class="docutils literal"><span class="pre">sp_flag</span></code></span></td><td><span class="yiyi-st" id="yiyi-44">保留</span></td></tr></tbody></table><p><span class="yiyi-st" id="yiyi-45">sp_namp和sp_pwdp项是字符串，所有其他都是整数。</span><span class="yiyi-st" id="yiyi-46">如果无法找到要求的条目，则会引发<a class="reference internal" href="exceptions.html#KeyError" title="KeyError"><code class="xref py py-exc docutils literal"><span class="pre">KeyError</span></code></a>。</span></p><p><span class="yiyi-st" id="yiyi-47">定义以下功能：</span></p><dl class="function"><dt id="spwd.getspnam"><span class="yiyi-st" id="yiyi-48"> <code class="descclassname">spwd.</code><code class="descname">getspnam</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span></span></dt><dd><p><span class="yiyi-st" id="yiyi-49">返回给定用户名的影子密码数据库条目。</span></p></dd></dl><dl class="function"><dt id="spwd.getspall"><span class="yiyi-st" id="yiyi-50"> <code class="descclassname">spwd.</code><code class="descname">getspall</code><span class="sig-paren">(</span><span class="sig-paren">)</span></span></dt><dd><p><span class="yiyi-st" id="yiyi-51">以任意顺序返回所有可用shadow密码数据库条目的列表。</span></p></dd></dl><div class="admonition seealso"><p class="first admonition-title"><span class="yiyi-st" id="yiyi-52">也可以看看</span></p><dl class="last docutils"><dt><span class="yiyi-st" id="yiyi-53">模块<a class="reference internal" href="grp.html#module-grp" title="grp: The group database (getgrnam() and friends). (Unix)"><code class="xref py py-mod docutils literal"><span class="pre">grp</span></code></a></span></dt><dd><span class="yiyi-st" id="yiyi-54">一个到组数据库的接口，类似于此。</span></dd><dt><span class="yiyi-st" id="yiyi-55">模块<a class="reference internal" href="pwd.html#module-pwd" title="pwd: The password database (getpwnam() and friends). (Unix)"><code class="xref py py-mod docutils literal"><span class="pre">pwd</span></code></a></span></dt><dd><span class="yiyi-st" id="yiyi-56">一个接口到正常的密码数据库，类似这样。</span></dd></dl></div></div></div>