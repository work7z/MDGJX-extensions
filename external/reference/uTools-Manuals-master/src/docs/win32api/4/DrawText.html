<html>
<body>

<h3>函数功能</h3>该函数在指定的矩形里写入格式化文本，根据指定的方法对文本格式化（扩展的制表符，字符对齐、折行等）。<br>
<h3>函数原型</h3>int DrawText(HDC, hdc, LPCTSTR lpString, int nCount, LPREST lpRect, UINT uFormat)；<br>
<h3>参数</h3>
hdc：设备环境句柄。<br>
lpString：指向将被写入的字符串的指针，如果参数nCount是C1，则字符串必须是以\0结束的。<br>
如果uFormat包含DT_MODIFYSTRING，则函数可为此字符串增加4个字符，存放字符串的缓冲区必须足够大，能容纳附加的字符。<br>
nCount：指向字符串中的字符数。如果nCount为C1，则lpString指向的字符串被认为是以\0结束的，DrawText会自动计算字符数。<br>
lpRect：指向结构RECT的指针，其中包含正文将被置于其中的矩形的信息（按逻辑坐标）。<br>
uFormat：指定格式化正文的方法。它可以下列值的任意组合，各值描述如下：<br>
DT_BOTTOM：将正文调整到矩形底部。此值必须和DT_SINGLELINE组合。<br>
DT_CALCRECT：决定矩形的宽和高。如果正文有多行，DrawText使用lpRect定义的矩形的宽度，并扩展矩形的底训以容纳正文的最后一行，如果正文只有一行，则DrawText改变矩形的右边界，以容纳下正文行的最后一个字符，上述任何一种情况，DrawText返回格式化正文的高度而不是写正文。<br>
DT_CENTER：使正文在矩形中水平居中。<br>
DT_EDITCONTROL：复制多行编辑控制的正文显示特性，特殊地，为编辑控制的平均字符宽度是以同样的方法计算的，此函数不显示只是部分可见的最后一行。<br>
DT_END_ELLIPSIS或DT_PATH_ELLIPSIS：可以指定DT_END_ELLIPSIS来替换在字符串末尾的字符，或指定DT_PATH_ELLIPSIS来替换字符串中间的字符。如果字符串里含有反斜扛，DT_PATH_ELLIPSIS尽可能地保留最后一个反斜杠之后的正文。<br>
DT_EXPANDTABS：扩展制表符，每个制表符的缺省字符数是8。<br>
DT_EXTERNALLEADING：在行的高度里包含字体的外部标头，通常，外部标头不被包含在正文行的高度里。<br>
DT_INTERNAL：用系统字体来计算正文度量。<br>
DT_LEFT：正文左对齐。<br>
DT_MODIFYSTRING：修改给定的字符串来匹配显示的正文，此标志必须和DT_END_ELLIPSIS或DT_PATH_ELLIPSIS同时使用。<br>
DT_NOCLIP：无裁剪绘制当DT_NOCLIP使用时DrawText的使用会有所加快。<br>
DT_NOPREFIX：关闭前缀字符的处理，通常DrawText解释助记前缀字符，&为给其后的字符加下划线，解释&&为显示单个&。指定DT_NOPREFIX，这种处理被关闭。<br>
DT_RIGHT：正文右对齐。<br>
DT_RTLREADING：当选择进设备环境的字体是Hebrew或Arabicf时，为双向正文安排从右到左的阅读顺序都是从左到右的。<br>
DT_SINGLELINE：显示正文的同一行，回车和换行符都不能折行。<br>
DT_TABSTOP：设置制表，参数uFormat的15"C8位（低位字中的高位字节）指定每个制表符的字符数，每个制表符的缺省字符数是8。<br>
DT_TOP：正文顶端对齐（仅对单行）。DT_VCENTER：正文水平居中（仅对单行）。<br>
DT_WORDBREAK：断开字。当一行中的字符将会延伸到由lpRect指定的矩形的边框时，此行自动地在字之间断开。一个回车一换行也能使行折断。<br>
DT_WORD_ELLIPSIS：截短不符合矩形的正文，并增加椭圆。<br>
注意：DT_CALCRECT, DT_EXTERNALLEADING, DT_INTERNAL, DT_NOCLIP, DT_NOPREFIX值不能和DT_TABSTOP值一起使用。<br>
<h3>返回值</h3>如果函数调用成功，返回值是正文的高度；如果函数调用失败，返回值是0。<br>
Windows NT：若想获得更多错误信息，请调用GetLastError函数。<br>
备注：函数DrawText用设备环境中的字体选择、正文颜色和背景颜色来写正文，除非DT_NOCLIP被使用，DrawText裁剪正文，所以它不会出现在指定矩形的外面，除DT_SINGLELINE格式化，其余的格式都认为正文有多行。<br>
如果选择的字体对指定的矩形而言太大，DrawText不会试图去换成一种小字体。<br>
Windows CE：如果为参数uFormat指定DT_CALCRECT值，必须为lpRect指向的RECT结构设置right和bottom成员。Windows CE不支持uFormat为DT_EXTERNALLEADING。<br>
<h3>速查</h3>Windows NT：3.1及以上版本；Windows：95及以上版本；Windows CE：1.0及以上版本；头文件：wingdi.h；库文件：gdi32.lib；Unicode：在Windows NT环境下以Unicode和ANSI两种方式实现。<br>

</body>
</html>
