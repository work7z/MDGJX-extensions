<div class="c-markdown doc-markdown"><div class="doc-postil"><div class="c-markdown"><h2>名称</h2></div></div><div class="doc-postil"><div class="c-markdown"><p>git-pack-refs  - 打包标头和标签以便高效的存储库访问</p></div></div><div class="doc-postil"><div class="c-markdown"><h2>概要</h2></div></div><div class="doc-postil"><div class="c-markdown"><pre><code class="language-Bash">git pack-refs [--all] [--no-prune]</code></pre></div></div><div class="doc-postil"><div class="c-markdown"><h2>描述</h2></div></div><div class="doc-postil"><div class="c-markdown"><p>传统上，分支和标签（统称为<code>refs</code>）的提示每个参考文件存储在目录下的（子）<code>$GIT_DIR/refs</code>目录中。尽管许多分支技巧往往会经常更新，但大多数标签和一些分支技巧从未更新过。当一个存储库有数百或数千个标签时，这种每文件一格式的格式既浪费存储空间又损害性能。</p></div></div><div class="doc-postil"><div class="c-markdown"><p>该命令用于通过将 ref 存储在单个文件中来解决存储和性能问题，<code>$GIT_DIR/packed-refs</code>。如果传统<code>$GIT_DIR/refs</code>目录层次结构中缺少 ref ，则会在此文件中查找并在找到时使用。</p></div></div><div class="doc-postil"><div class="c-markdown"><p>对分支的后续更新总是在<code>$GIT_DIR/refs</code>目录层次结构下创建新文件。</p></div></div><div class="doc-postil"><div class="c-markdown"><p>一个推荐的做法是处理一个资料库太多的参考文献，它只<code>--all</code>会将其参考文献打包一次，偶尔也会运行<code>git pack-refs</code>。标签根据定义是固定的，预计不会改变。分行负责人将收集最初的<code>pack-refs --all</code>，但只有当前活跃的分行负责人将被解包，而下一个<code>pack-refs</code>（不含<code>--all</code>）将使他们解包。</p></div></div><div class="doc-postil"><div class="c-markdown"><h2>选项</h2></div></div><div class="doc-postil"><div class="c-markdown"><p>--all</p></div></div><div class="doc-postil"><div class="c-markdown"><p>该命令默认打包已经打包的所有标签和引用，并且仅保留其他引用。这是因为分支机构预计会积极开发，打包他们的提示无助于性能。此选项也会导致分支提示被打包。用于具有许多历史兴趣分支的存储库。</p></div></div><div class="doc-postil"><div class="c-markdown"><p>--no-prune</p></div></div><div class="doc-postil"><div class="c-markdown"><p>这个命令通常会<code>$GIT_DIR/refs</code>在打包它们之后删除松散参考。这个选项告诉它不要。</p></div></div><div class="doc-postil"><div class="c-markdown"><h2>错误</h2></div></div><div class="doc-postil"><div class="c-markdown"><p>在引入packed-refs机制之前编写的旧文档可能仍然表示“.git / refs / heads / &lt;branch&gt;文件存在”，意思是“分支&lt;分支&gt;存在”。</p></div></div></div>