<div class="c-markdown doc-markdown"><div class="doc-postil"><div class="c-markdown"><h2>名称</h2></div></div><div class="doc-postil"><div class="c-markdown"><p>git-sh-setup  - 常用的 Git shell 脚本设置代码</p></div></div><div class="doc-postil"><div class="c-markdown"><h2>概要</h2></div></div><div class="doc-postil"><div class="c-markdown"><pre><code class="language-Bash">. "$(git --exec-path)/git-sh-setup"</code></pre></div></div><div class="doc-postil"><div class="c-markdown"><h2>描述</h2></div></div><div class="doc-postil"><div class="c-markdown"><p>这不是最终用户想要运行的命令。永远不会是。本文档适用于正在研究 Pornic-ish 脚本和/或正在编写新脚本的人员。</p></div></div><div class="doc-postil"><div class="c-markdown"><p>该<code>git sh-setup</code>小脚本设计（使用要采购<code>.</code>通过其他 shell 脚本）设置一些变量，在普通的 Git 目录和几个帮手外壳功能指向。</p></div></div><div class="doc-postil"><div class="c-markdown"><p>在采购它之前，您的脚本应该设置一些变量； <code>USAGE</code>（以及<code>LONG_USAGE</code>如果有的话）用于定义由<code>usage()</code>shell 函数给出的消息。<code>SUBDIRECTORY_OK</code>可以设置脚本是否可以从工作树的子目录运行（某些命令不会）。</p></div></div><div class="doc-postil"><div class="c-markdown"><p>小脚本设置<code>GIT_DIR</code>和<code>GIT_OBJECT_DIRECTORY</code>shell 变量，但并<strong>没有</strong>将其导出到环境中。</p></div></div><div class="doc-postil"><div class="c-markdown"><h2>功能</h2></div></div><div class="doc-postil"><div class="c-markdown"><p>结束</p></div></div><div class="doc-postil"><div class="c-markdown"><p>将提供的错误消息发送到标准错误流后退出。</p></div></div><div class="doc-postil"><div class="c-markdown"><p>用法</p></div></div><div class="doc-postil"><div class="c-markdown"><p>与用法消息一起结束。</p></div></div><div class="doc-postil"><div class="c-markdown"><p>set_reflog_action</p></div></div><div class="doc-postil"><div class="c-markdown"><p>除非已设置<code>GIT_REFLOG_ACTION</code>环境，否则请将环境设置为给定的字符串（通常是程序的名称）。每当脚本运行<code>git</code>更新引用的命令时，就会使用此字符串的值创建引用日志条目，以保留引用更新引用的记录。</p></div></div><div class="doc-postil"><div class="c-markdown"><p>git_editor</p></div></div><div class="doc-postil"><div class="c-markdown"><p>在给定的文件上运行用户选择的编辑器（GIT_EDITOR，core.editor，VISUAL或EDITOR），但如果没有指定编辑器并且终端为哑，则出错。</p></div></div><div class="doc-postil"><div class="c-markdown"><p>is_bare_repository</p></div></div><div class="doc-postil"><div class="c-markdown"><p>输出<code>true</code>或<code>false</code>标准输出流来指示仓库是否为裸仓库（即没有关联的工作树）。</p></div></div><div class="doc-postil"><div class="c-markdown"><p>cd_to_toplevel</p></div></div><div class="doc-postil"><div class="c-markdown"><p>运行 chdir 到工作树的顶层。</p></div></div><div class="doc-postil"><div class="c-markdown"><p>require_work_tree</p></div></div><div class="doc-postil"><div class="c-markdown"><p>检查当前目录是否在存储库的工作树内，否则会结束。</p></div></div><div class="doc-postil"><div class="c-markdown"><p>require_work_tree_exists</p></div></div><div class="doc-postil"><div class="c-markdown"><p>检查与存储库相关联的工作树是否存在，否则将结束。通常在调用 cd_to_toplevel
 之前完成，如果没有工作树，这是不可能的。</p></div></div><div class="doc-postil"><div class="c-markdown"><p>require_clean_work_tree &lt;action&gt; &lt;hint&gt;</p></div></div><div class="doc-postil"><div class="c-markdown"><p>检查与存储库相关联的工作树和索引没有未被落实的对被跟踪文件的改变。否则它会发出<code>Cannot &lt;action&gt;: &lt;reason&gt;. &lt;hint&gt;</code>表单的错误消息，并结束。例：</p></div></div><div class="doc-postil"><div class="c-markdown"><pre><code class="language-Bash">require_clean_work_tree rebase "Please commit or stash them."</code></pre></div></div><div class="doc-postil"><div class="c-markdown"><p>get_author_ident_from_commit</p></div></div><div class="doc-postil"><div class="c-markdown"><p>输出与 eval 一起使用的代码，以便为给定提交设置 GIT_AUTHOR_NAME，GIT_AUTHOR_EMAIL和GIT_AUTHOR_DATE 变量。</p></div></div><div class="doc-postil"><div class="c-markdown"><p>create_virtual_base</p></div></div><div class="doc-postil"><div class="c-markdown"><p>修改第一个文件，只保留与第二个文件相同的行。如果共用资料不足，则第一个文件留空。该结果适合作为3路合并的虚拟基础输入。</p></div></div></div>